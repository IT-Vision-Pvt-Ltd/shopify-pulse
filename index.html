<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShopifyPulse â€“ Unified Analytics Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.6/Sortable.min.js"></script>
<script>
tailwind.config={darkMode:'class',theme:{extend:{fontFamily:{sans:['Inter','system-ui','sans-serif']}}}}
</script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',system-ui,sans-serif;transition:background .3s,color .3s}

/* === LIGHT THEME === */
[data-theme="light"] body{background:#f0f7fa;color:#1a2b3c}
[data-theme="light"] .sidebar{background:linear-gradient(180deg,#012840,#023e58 50%,#005f73)}
[data-theme="light"] .top-bar{background:#fff;border-color:#dde8ef}
[data-theme="light"] .dash-card{background:#fff;border-color:#dde8ef}
[data-theme="light"] .kpi-card{background:#fff;border-color:#dde8ef}
[data-theme="light"] .surface-bg{background:#edf4f8}
[data-theme="light"] .muted-text{color:#5f7d8e}
[data-theme="light"] .filter-chip{background:#edf4f8;color:#5f7d8e;border-color:#dde8ef}
[data-theme="light"] .filter-chip:hover{background:#dde8ef;color:#0077b6}
[data-theme="light"] .filter-chip.active{background:#e0f2fe;color:#0077b6;border-color:#0077b6}
[data-theme="light"] .table-header{background:#f0f7fa;color:#5f7d8e}
[data-theme="light"] .table-row{border-color:#edf4f8}
[data-theme="light"] .table-row:hover{background:#f8fbfd}
[data-theme="light"] .tab-btn{color:#5f7d8e;border-color:transparent}
[data-theme="light"] .tab-btn:hover{color:#0077b6;background:#e0f2fe}
[data-theme="light"] .tab-btn.active{color:#0077b6;border-color:#0077b6;background:#e0f2fe}

/* === DARK THEME === */
[data-theme="dark"] body{background:#0b1622;color:#c8d6e5}
[data-theme="dark"] .sidebar{background:linear-gradient(180deg,#060f18,#091520 50%,#0b1a28)}
[data-theme="dark"] .top-bar{background:#111d2e;border-color:#1c2e40}
[data-theme="dark"] .dash-card{background:#111d2e;border-color:#1c2e40}
[data-theme="dark"] .kpi-card{background:#111d2e;border-color:#1c2e40}
[data-theme="dark"] .surface-bg{background:#162435}
[data-theme="dark"] .muted-text{color:#6b8299}
[data-theme="dark"] .text-gray-900{color:#e2ecf5!important}
[data-theme="dark"] .text-gray-800{color:#d0dce8!important}
[data-theme="dark"] .text-gray-700{color:#b0c4d8!important}
[data-theme="dark"] .text-gray-600{color:#8aa0b8!important}
[data-theme="dark"] .text-gray-500{color:#6b8299!important}
[data-theme="dark"] .text-gray-400{color:#567088!important}
[data-theme="dark"] input,select{background:#162435!important;border-color:#1c2e40!important;color:#c8d6e5!important}
[data-theme="dark"] .filter-chip{background:#162435;color:#6b8299;border-color:#1c2e40}
[data-theme="dark"] .filter-chip:hover{background:#1a3048;color:#48cae4}
[data-theme="dark"] .filter-chip.active{background:#0b2a3f;color:#48cae4;border-color:#48cae4}
[data-theme="dark"] .table-header{background:#0e1a28;color:#6b8299}
[data-theme="dark"] .table-row{border-color:#1c2e40}
[data-theme="dark"] .table-row:hover{background:#162435}
[data-theme="dark"] .tab-btn{color:#6b8299;border-color:transparent}
[data-theme="dark"] .tab-btn:hover{color:#48cae4;background:#0b2a3f}
[data-theme="dark"] .tab-btn.active{color:#48cae4;border-color:#48cae4;background:#0b2a3f}
[data-theme="dark"] .ai-chip{background:linear-gradient(135deg,#0b2a3f,#0d3855)!important;border-color:#1c4a65!important;color:#7bcce8!important}
[data-theme="dark"] .badge-green{background:#0a2e20!important;color:#34d399!important}
[data-theme="dark"] .badge-red{background:#2a1215!important;color:#f87171!important}
[data-theme="dark"] .badge-yellow{background:#2a2010!important;color:#fbbf24!important}
[data-theme="dark"] .badge-sea{background:#0b2a3f!important;color:#7bcce8!important}
[data-theme="dark"] .icon-btn{color:#6b8299!important}
[data-theme="dark"] .icon-btn:hover{background:#1a3048!important;color:#c8d6e5!important}
[data-theme="dark"] .notif-badge{border-color:#111d2e}
[data-theme="dark"] .goal-bar{background:#1c2e40!important}
[data-theme="dark"] .pipeline-step{background:#162435!important;border-color:#1c2e40!important}
[data-theme="dark"] .leak-alert{background:#2a1215!important;border-color:#5c2020!important}
[data-theme="dark"] .apexcharts-svg{background:transparent!important}
[data-theme="dark"] .apexcharts-text{fill:#6b8299!important}
[data-theme="dark"] .apexcharts-grid line,[data-theme="dark"] .apexcharts-gridline{stroke:#1c2e40!important}
[data-theme="dark"] .apexcharts-legend-text{color:#8aa0b8!important}
[data-theme="dark"] .apexcharts-tooltip{background:#162435!important;border-color:#1c2e40!important;color:#c8d6e5!important;box-shadow:0 4px 20px rgba(0,0,0,.4)!important}
[data-theme="dark"] .apexcharts-tooltip-title{background:#1c2e40!important;border-color:#1c2e40!important;color:#c8d6e5!important}
[data-theme="dark"] .apexcharts-heatmap-rect{stroke:#111d2e!important}
[data-theme="dark"] .apexcharts-datalabel-label{fill:#6b8299!important}
[data-theme="dark"] .apexcharts-datalabel-value{fill:#e2ecf5!important}
[data-theme="dark"] .apexcharts-radialbar-track path{stroke:#1c2e40!important}
[data-theme="dark"] .apexcharts-xaxistooltip,[data-theme="dark"] .apexcharts-yaxistooltip{background:#162435!important;border-color:#1c2e40!important;color:#c8d6e5!important}

/* Scrollbar */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
[data-theme="light"] ::-webkit-scrollbar-thumb{background:#b8d0de;border-radius:3px}
[data-theme="dark"] ::-webkit-scrollbar-thumb{background:#1c2e40;border-radius:3px}

/* Sidebar */
.sidebar{width:256px;min-height:100vh;position:fixed;left:0;top:0;z-index:50;overflow-y:auto;transition:transform .3s}
.sidebar-link{display:flex;align-items:center;gap:12px;padding:10px 16px;border-radius:8px;color:rgba(200,214,229,.65);font-size:14px;font-weight:500;transition:all .2s;cursor:pointer;margin:2px 12px}
.sidebar-link:hover{background:rgba(255,255,255,.08);color:#e2ecf5}
.sidebar-link.active{background:linear-gradient(135deg,#0077b6,#0096c7);color:#fff;box-shadow:0 2px 10px rgba(0,119,182,.35)}
.sidebar-separator{height:1px;background:rgba(255,255,255,.1);margin:12px 20px}
.store-selector{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:10px 14px;color:#b3e0f0;font-size:13px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;margin:12px}
@media(max-width:1023px){.sidebar{transform:translateX(-100%)}.sidebar.open{transform:translateX(0)}.main-content{margin-left:0!important}}
.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:45}
.sidebar-overlay.active{display:block}
.main-content{margin-left:256px;min-height:100vh}

/* Top Bar */
.top-bar{border-bottom:1px solid;padding:12px 24px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:40;backdrop-filter:blur(12px);transition:all .3s}

/* Cards */
.dash-card{border-radius:14px;border:1px solid;box-shadow:0 1px 4px rgba(0,0,0,.03);transition:all .25s;overflow:hidden}
.dash-card:hover{box-shadow:0 6px 24px rgba(0,80,130,.1)}
.kpi-card{border-radius:14px;border:1px solid;padding:18px;transition:all .25s;position:relative;overflow:hidden}
.kpi-card:hover{box-shadow:0 6px 24px rgba(0,80,130,.1);transform:translateY(-2px)}

/* Badges */
.badge{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:20px;font-size:11px;font-weight:600}
.badge-green{background:#ecfdf5;color:#059669}
.badge-red{background:#fef2f2;color:#dc2626}
.badge-yellow{background:#fffbeb;color:#d97706}
.badge-sea{background:#e6f5fa;color:#0077b6}

/* AI Chip */
.ai-chip{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#e6f5fa,#b3e0f0);border:1px solid #80cce6;border-radius:8px;padding:8px 12px;font-size:12px;color:#005f73;transition:all .3s}
.ai-chip-icon{width:20px;height:20px;background:linear-gradient(135deg,#0077b6,#00b4d8);border-radius:5px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:9px;font-weight:700;flex-shrink:0}

/* AI Alert Banner */
.ai-alert-banner{background:linear-gradient(135deg,#1e1b4b,#312e81);border-radius:12px;padding:14px 18px;color:#e0e7ff;display:flex;align-items:center;justify-content:space-between;gap:12px}
[data-theme="light"] .ai-alert-banner{background:linear-gradient(135deg,#e0e7ff,#c7d2fe);color:#312e81}

/* Buttons */
.ask-ai-btn{background:linear-gradient(135deg,#0077b6,#00b4d8);color:#fff;padding:8px 20px;border-radius:10px;font-weight:600;font-size:14px;display:flex;align-items:center;gap:8px;border:none;cursor:pointer;transition:all .2s;box-shadow:0 2px 10px rgba(0,119,182,.3)}
.icon-btn{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#5f7d8e;transition:all .15s;cursor:pointer;border:1px solid transparent}
.icon-btn:hover{background:#e6f5fa;border-color:#b3e0f0;color:#005f73}
.notif-badge{position:absolute;top:-2px;right:-2px;width:18px;height:18px;background:#ef4444;color:#fff;font-size:10px;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #fff}
.mobile-menu-btn{display:none}
@media(max-width:1023px){.mobile-menu-btn{display:flex}}

/* Filter Chips */
.filter-chip{display:inline-flex;align-items:center;gap:5px;padding:5px 12px;border-radius:20px;font-size:11px;font-weight:500;border:1px solid;cursor:pointer;transition:all .2s;white-space:nowrap}

/* Tables */
.data-table{width:100%;border-collapse:collapse}
.data-table th{text-align:left;padding:8px 12px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.04em}
.data-table td{padding:8px 12px;font-size:12px}
.table-row{border-bottom:1px solid;transition:background .15s}

/* Progress Bars */
.goal-bar{height:8px;border-radius:4px;overflow:hidden}
.goal-fill{height:100%;border-radius:4px;transition:width 1.2s ease}

/* Drag & Drop */
.drag-handle{cursor:grab;display:flex;align-items:center;gap:6px}
.drag-handle:active{cursor:grabbing}
.grip-dots{opacity:0;transition:opacity .2s}
.dash-card:hover .grip-dots{opacity:.5}
.sortable-ghost{opacity:.4}
.expand-btn{width:26px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .15s;opacity:0;border:none;background:transparent;color:inherit}
.expand-btn:hover{background:rgba(0,150,199,.1)}
.dash-card:hover .expand-btn{opacity:1}

/* Section Headers */
.section-hdr{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;display:flex;align-items:center;gap:8px;padding:0 2px;margin-bottom:4px}
[data-theme="light"] .section-hdr{color:#5f7d8e}[data-theme="light"] .section-hdr::after{content:'';flex:1;height:1px;background:#d0e4ed}
[data-theme="dark"] .section-hdr{color:#6b8299}[data-theme="dark"] .section-hdr::after{content:'';flex:1;height:1px;background:#1c2e40}

/* Fullscreen Overlay */
.fs-overlay{display:none;position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);justify-content:center;align-items:center;padding:40px}
.fs-overlay.active{display:flex}
.fs-card{width:100%;max-width:1200px;max-height:90vh;border-radius:16px;padding:30px;overflow:auto}
[data-theme="light"] .fs-card{background:#fff}[data-theme="dark"] .fs-card{background:#111d2e}

/* Lock FAB */
.lock-fab{position:fixed;bottom:24px;right:24px;z-index:100;display:flex;align-items:center;gap:8px;padding:10px 18px;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all .25s;box-shadow:0 4px 16px rgba(0,0,0,.15);border:none}
[data-theme="light"] .lock-fab{background:#fff;color:#0077b6;border:1px solid #dde8ef}
[data-theme="light"] .lock-fab:hover{background:#e6f5fa}
[data-theme="dark"] .lock-fab{background:#162435;color:#48cae4;border:1px solid #1c2e40}
[data-theme="dark"] .lock-fab:hover{background:#1a3048}
.lock-fab.unlocked{border-color:#0096c7}

/* Pipeline */
.pipeline-step{text-align:center;padding:12px 6px;border-radius:10px;border:1px solid;min-width:55px;flex:1;transition:all .3s}
.pipeline-arrow{display:flex;align-items:center;color:#80cce6}

/* Animations */
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.anim{animation:fadeIn .4s ease forwards;opacity:0}
.d1{animation-delay:.05s}.d2{animation-delay:.1s}.d3{animation-delay:.15s}.d4{animation-delay:.2s}.d5{animation-delay:.25s}

/* AI Brief Banner */
.ai-brief{background:linear-gradient(135deg,#012840 0%,#005f73 40%,#0077b6 70%,#0096c7 100%);border-radius:14px;padding:24px;color:#fff;position:relative;overflow:hidden}
.ai-brief::before{content:'';position:absolute;top:-60%;right:-15%;width:350px;height:350px;background:radial-gradient(circle,rgba(0,180,216,.15) 0%,transparent 70%);border-radius:50%}

/* Footer */
.page-footer{border-top:1px solid;padding:16px 24px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:12px;font-size:12px}
[data-theme="light"] .page-footer{border-color:#dde8ef;color:#5f7d8e}
[data-theme="dark"] .page-footer{border-color:#1c2e40;color:#6b8299}
.footer-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;border:1px solid}
[data-theme="light"] .footer-btn{background:#fff;border-color:#dde8ef;color:#0077b6}
[data-theme="light"] .footer-btn:hover{background:#e6f5fa}
[data-theme="dark"] .footer-btn{background:#162435;border-color:#1c2e40;color:#48cae4}
[data-theme="dark"] .footer-btn:hover{background:#1a3048}

/* Cohort Table */
.cohort-cell{text-align:center;padding:6px 4px;font-size:11px;font-weight:600;border-radius:4px}
.cohort-header{text-align:center;padding:6px 4px;font-size:10px;font-weight:700;color:#6b8299}

/* Funnel */
.funnel-step{background:linear-gradient(90deg,#0077b6,#00b4d8);color:#fff;padding:10px 16px;border-radius:8px;text-align:center;font-size:13px;font-weight:600;margin:4px 0;position:relative}
.funnel-connector{height:20px;width:2px;background:#0077b6;margin:0 auto;position:relative}
.funnel-connector::after{content:'';position:absolute;bottom:-4px;left:-3px;width:8px;height:8px;border-right:2px solid #0077b6;border-bottom:2px solid #0077b6;transform:rotate(45deg)}

/* Heatmap Cell */
.hm-cell{border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;transition:all .2s;cursor:pointer}
.hm-cell:hover{transform:scale(1.05)}

/* Sankey */
.sankey-node{padding:8px 12px;border-radius:6px;font-size:11px;font-weight:600;text-align:center}
.sankey-connector{height:8px;border-radius:4px;background:linear-gradient(90deg,#0077b6,#00b4d8);opacity:.6}

/* Treemap */
.treemap-cell{padding:8px;border-radius:4px;font-size:11px;font-weight:600;color:#fff;text-align:center;transition:all .2s;cursor:pointer}
.treemap-cell:hover{transform:scale(1.02);z-index:10}

/* Action Items */
.action-item{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;border-radius:8px;transition:background .15s;border:1px solid transparent}
.action-item:hover{background:#f0f7fa;border-color:#e0ecf2}
.alert-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0;margin-top:4px}
.alert-dot.red{background:#ef4444}.alert-dot.yellow{background:#f59e0b}.alert-dot.green{background:#22c55e}

/* Leak Alert */
.leak-alert{background:#fef2f2;border:1px solid #fecaca;border-radius:8px;padding:10px 14px;display:flex;align-items:flex-start;gap:8px;transition:all .3s}

/* Carrier Bar */
.carrier-bar{height:28px;border-radius:6px;background:linear-gradient(90deg,#b3e0f0,#80cce6);display:flex;align-items:center;justify-content:flex-end;padding-right:12px;font-size:12px;font-weight:600;color:#005f73;transition:all .3s}

/* Tab Buttons */
.tab-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 18px;border-radius:8px;font-size:13px;font-weight:600;border:1px solid;cursor:pointer;transition:all .2s;white-space:nowrap}

/* Pulse Animation */
@keyframes pulse-dot{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.5);opacity:.5}}
.pulse-dot{animation:pulse-dot 2s ease-in-out infinite}

/* Page Content */
.page-content{display:none}
.page-content.active{display:block}

/* Tab Content */
.tab-content{display:none}
.tab-content.active{display:block}

/* Affinity Node */
.affinity-node{position:absolute;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,.2);transition:all .2s;cursor:pointer}
.affinity-node:hover{transform:scale(1.1)}

/* Hot Badge */
.hot-badge{position:absolute;top:-8px;right:-8px;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;font-size:8px;font-weight:700;padding:2px 6px;border-radius:10px;white-space:nowrap;box-shadow:0 2px 6px rgba(239,68,68,.4)}

/* Page Button */
.page-btn{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;cursor:pointer;transition:all .15s;border:1px solid}
[data-theme="light"] .page-btn{background:#fff;border-color:#dde8ef;color:#5f7d8e}
[data-theme="light"] .page-btn:hover{background:#e6f5fa;color:#0077b6}
[data-theme="light"] .page-btn.active{background:#0077b6;border-color:#0077b6;color:#fff}
[data-theme="dark"] .page-btn{background:#162435;border-color:#1c2e40;color:#6b8299}
[data-theme="dark"] .page-btn:hover{background:#1a3048;color:#48cae4}
[data-theme="dark"] .page-btn.active{background:#0077b6;border-color:#0077b6;color:#fff}

/* Action Button */
.action-btn{padding:4px 10px;border-radius:6px;font-size:10px;font-weight:600;cursor:pointer;transition:all .15s;border:none}
.action-btn-blue{background:#0077b6;color:#fff}
.action-btn-blue:hover{background:#005f73}
.action-btn-yellow{background:#f59e0b;color:#fff}
.action-btn-yellow:hover{background:#d97706}
.action-btn-red{background:#ef4444;color:#fff}
.action-btn-red:hover{background:#dc2626}
.action-btn-green{background:#22c55e;color:#fff}
.action-btn-green:hover{background:#16a34a}

/* Stockout Timeline */
.timeline-bar{height:24px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:#fff}
.timeline-bar.urgent{background:#ef4444}
.timeline-bar.soon{background:#f59e0b}
.timeline-bar.ok{background:#22c55e}

/* Variant Heatmap */
.variant-heatmap-cell{padding:10px 6px;border-radius:4px;text-align:center;font-size:12px;font-weight:600;transition:all .2s;cursor:pointer}
.variant-heatmap-cell:hover{transform:scale(1.05)}

/* Status Dot */
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.status-dot.green{background:#22c55e}
.status-dot.yellow{background:#f59e0b}
.status-dot.red{background:#ef4444}
</style>
</head>
<body>

<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
<div class="p-5 pb-3">
<div class="flex items-center gap-3">
<div class="w-9 h-9 rounded-lg flex items-center justify-center" style="background:linear-gradient(135deg,#0096c7,#00b4d8)">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
</div>
<span class="text-white font-bold text-lg tracking-tight">ShopifyPulse</span>
</div>
</div>
<nav class="mt-2 pb-4">
<div class="sidebar-link active" onclick="switchPage('dashboard')" data-page="dashboard"><i data-lucide="layout-dashboard"></i><span>Dashboard</span></div>
<div class="sidebar-link" onclick="switchPage('sales')" data-page="sales"><i data-lucide="trending-up"></i><span>Sales & Revenue</span></div>
<div class="sidebar-link" onclick="switchPage('products')" data-page="products"><i data-lucide="box"></i><span>Products</span></div>
<div class="sidebar-link" onclick="switchPage('customers')" data-page="customers"><i data-lucide="users"></i><span>Customer Intelligence</span></div>
<div class="sidebar-link" onclick="switchPage('marketing')" data-page="marketing"><i data-lucide="megaphone"></i><span>Marketing</span></div>
<div class="sidebar-link" onclick="switchPage('inventory')" data-page="inventory"><i data-lucide="warehouse"></i><span>Inventory</span></div>
<div class="sidebar-link" onclick="switchPage('reports')" data-page="reports"><i data-lucide="bar-chart-3"></i><span>Reports</span></div>
<div class="sidebar-separator"></div>
<div class="sidebar-link" style="color:#7bcce8"><i data-lucide="sparkles" style="color:#00b4d8"></i><span>AI Insights</span><span class="ml-auto text-[10px] font-bold px-2 py-0.5 rounded-full" style="background:#0096c7;color:#fff">AI</span></div>
<div class="sidebar-link"><i data-lucide="settings"></i><span>Settings</span></div>
</nav>
<div class="mt-auto p-3">
<div class="store-selector"><span>Select Store</span><i data-lucide="chevron-down" style="width:16px;height:16px"></i></div>
</div>
</aside>

<!-- MAIN CONTENT -->
<div class="main-content">
<header class="top-bar">
<div class="flex items-center gap-3">
<button class="mobile-menu-btn icon-btn" onclick="toggleSidebar()"><i data-lucide="menu" style="width:20px;height:20px"></i></button>
<div class="date-picker flex items-center gap-2 surface-bg rounded-lg px-3 py-2 text-sm text-gray-500 cursor-pointer border" style="border-color:inherit">
<i data-lucide="calendar" style="width:16px;height:16px"></i>
<span class="hidden sm:inline">Last 30 Days</span>
<i data-lucide="chevron-down" style="width:14px;height:14px"></i>
</div>
</div>
<div class="flex-1 max-w-lg mx-4 lg:mx-8 hidden sm:block">
<div class="relative">
<i data-lucide="search" style="width:18px;height:18px" class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
<input type="text" placeholder="Search ShopifyPulse..." class="w-full pl-10 pr-4 py-2.5 surface-bg border rounded-xl text-sm focus:outline-none transition"/>
</div>
</div>
<div class="flex items-center gap-2">
<button class="ask-ai-btn"><i data-lucide="sparkles" style="width:16px;height:16px"></i><span class="hidden sm:inline">Ask AI</span></button>
<div class="icon-btn relative"><i data-lucide="bell" style="width:18px;height:18px"></i><div class="notif-badge">3</div></div>
<div class="icon-btn" onclick="toggleTheme()" title="Toggle theme">
<i data-lucide="moon" style="width:18px;height:18px" id="icMoon"></i>
<i data-lucide="sun" style="width:18px;height:18px;display:none" id="icSun"></i>
</div>
<div class="w-9 h-9 rounded-full flex items-center justify-center cursor-pointer ml-1" style="background:linear-gradient(135deg,#0077b6,#00b4d8)"><span class="text-white text-sm font-semibold">JD</span></div>
</div>
</header>


<!-- ==================== PAGE: DASHBOARD ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content active" id="page-dashboard">

<!-- AI BRIEF -->
<div class="ai-brief animate-in">
<div class="relative z-10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
<div>
<div class="flex items-center gap-2 mb-3"><i data-lucide="sparkles" style="width:20px;height:20px" class="text-cyan-200"></i><h2 class="text-lg font-bold">AI Daily Brief</h2></div>
<div class="space-y-2">
<div class="flex items-center gap-2 text-sm" style="color:rgba(179,224,240,.9)"><span class="w-2 h-2 rounded-full bg-teal-300 pulse-dot"></span>Revenue up 12% driven by SAVE20 promo success.</div>
<div class="flex items-center gap-2 text-sm" style="color:rgba(179,224,240,.9)"><span class="w-2 h-2 rounded-full bg-yellow-300"></span>237 customers at churn risk - win-back campaign ready.</div>
<div class="flex items-center gap-2 text-sm" style="color:rgba(179,224,240,.9)"><span class="w-2 h-2 rounded-full bg-blue-300"></span>3 SKUs will stockout within 5 days - reorder recommended.</div>
</div>
</div>
<button class="bg-white/20 hover:bg-white/30 text-white px-5 py-2.5 rounded-lg text-sm font-semibold transition flex items-center gap-2 backdrop-blur-sm whitespace-nowrap">View Full Report <i data-lucide="arrow-right" style="width:16px;height:16px"></i></button>
</div>
</div>

<!-- KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 lg:gap-4">
<div class="kpi-card animate-in d1" style="--c:#0077b6"><div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Revenue</div><div class="text-2xl font-bold text-gray-900">$24.8K</div><div class="flex items-center justify-between mt-3"><div id="spkRev" class="w-20 h-8"></div><span class="badge badge-green">+12%</span></div></div>
<div class="kpi-card animate-in d2"><div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Orders</div><div class="text-2xl font-bold text-gray-900">312</div><div class="flex items-center justify-between mt-3"><div id="spkOrd" class="w-20 h-8"></div><span class="badge badge-green">+5%</span></div></div>
<div class="kpi-card animate-in d3"><div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">AOV</div><div class="text-2xl font-bold text-gray-900">$79.50</div><div class="flex items-center justify-between mt-3"><div id="spkAov" class="w-20 h-8"></div><span class="badge badge-red">-2%</span></div></div>
<div class="kpi-card animate-in d4"><div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">CR</div><div class="text-2xl font-bold text-gray-900">3.2%</div><div class="flex items-center justify-between mt-3"><div id="spkCr" class="w-20 h-8"></div><span class="badge badge-green">+1.5%</span></div></div>
<div class="kpi-card animate-in d5 col-span-2 sm:col-span-1"><div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Profit</div><div class="text-2xl font-bold text-gray-900">18.4%</div><div class="flex items-center justify-between mt-3"><div id="spkPr" class="w-20 h-8"></div><span class="badge badge-green">+8%</span></div></div>
</div>

<!-- DRAGGABLE ROWS -->
<div id="sortableGrid" class="space-y-4">

<!-- ROW 1: Revenue Hour + Health Score -->
<div class="grid grid-cols-1 lg:grid-cols-5 gap-4 sortable-row" data-row="1">
<div class="lg:col-span-3 dash-card p-5" data-id="revHour">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Hour</h3></div><div class="flex items-center gap-1"><span class="text-xs text-gray-400">Today</span><button class="expand-btn" onclick="expandChart('cRevHour','Revenue by Hour')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div></div>
<div id="cRevHour" style="height:230px"></div>
</div>
<div class="lg:col-span-2 dash-card p-5 flex flex-col items-center" data-id="health">
<div class="flex items-center justify-between w-full mb-2"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Store Health Score</h3></div><button class="expand-btn" onclick="expandChart('cGauge','Store Health Score')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cGauge" style="height:230px;width:100%"></div>
</div>
</div>

<!-- ROW 2: Channel + Traffic + Funnel -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sortable-row" data-row="2">
<div class="dash-card p-5" data-id="channel">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Channel</h3></div><button class="expand-btn" onclick="expandChart('cChannel','Revenue by Channel')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cChannel" style="height:230px"></div>
</div>
<div class="dash-card p-5" data-id="traffic">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Traffic Sources</h3></div><button class="expand-btn" onclick="expandChart('cTraffic','Traffic Sources')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cTraffic" style="height:230px"></div>
</div>
<div class="dash-card p-5 md:col-span-2 lg:col-span-1" data-id="funnel">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Conversion Funnel</h3></div><button class="expand-btn" onclick="expandChart('cFunnel','Conversion Funnel')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cFunnel" style="height:230px"></div>
</div>
</div>

<!-- ROW 3: Heatmap + Alerts -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4 sortable-row" data-row="3">
<div class="lg:col-span-7 dash-card p-5" data-id="heatmap">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Weekly Performance Scorecard</h3></div><button class="expand-btn" onclick="expandChart('cHeatmap','Weekly Performance')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cHeatmap" style="height:230px"></div>
</div>
<div class="lg:col-span-5 dash-card p-5" data-id="alerts">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Alerts & Anomalies</h3></div>
<div class="space-y-2 max-h-[260px] overflow-y-auto pr-1">
<div class="flex items-start gap-3 p-2.5 rounded-lg bg-red-50 border border-red-100"><div class="alert-dot red mt-0.5"></div><div class="flex-1"><div class="text-xs font-medium text-gray-800">Revenue drop detected</div><div class="text-[10px] text-gray-500">Revenue fell 18% vs. last Tuesday.</div></div><span class="text-[10px] text-gray-400">2m</span></div>
<div class="flex items-start gap-3 p-2.5 rounded-lg bg-yellow-50 border border-yellow-100"><div class="alert-dot yellow mt-0.5"></div><div class="flex-1"><div class="text-xs font-medium text-gray-800">High cart abandonment</div><div class="text-[10px] text-gray-500">Spiked to 78% in the last hour.</div></div><span class="text-[10px] text-gray-400">15m</span></div>
<div class="flex items-start gap-3 p-2.5 rounded-lg bg-yellow-50 border border-yellow-100"><div class="alert-dot yellow mt-0.5"></div><div class="flex-1"><div class="text-xs font-medium text-gray-800">Shipping delay warning</div><div class="text-[10px] text-gray-500">FedEx delays in Northeast region.</div></div><span class="text-[10px] text-gray-400">32m</span></div>
<div class="flex items-start gap-3 p-2.5 rounded-lg bg-green-50 border border-green-100"><div class="alert-dot green mt-0.5"></div><div class="flex-1"><div class="text-xs font-medium text-gray-800">Organic traffic spike</div><div class="text-[10px] text-gray-500">Up 34% from Google in 2 hours.</div></div><span class="text-[10px] text-gray-400">1h</span></div>
<div class="flex items-start gap-3 p-2.5 rounded-lg bg-red-50 border border-red-100"><div class="alert-dot red mt-0.5"></div><div class="flex-1"><div class="text-xs font-medium text-gray-800">Inventory critically low</div><div class="text-[10px] text-gray-500">Blue Hoodie XL: 3 units left.</div></div><span class="text-[10px] text-gray-400">2h</span></div>
</div>
</div>
</div>

<!-- ROW 4: Sales Heatmap + YoY -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 sortable-row" data-row="4">
<div class="dash-card p-5" data-id="salesHeat">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Sales Heatmap</h3></div><button class="expand-btn" onclick="expandChart('cSalesHeat','Sales Heatmap')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cSalesHeat" style="height:230px"></div>
</div>
<div class="dash-card p-5" data-id="yoy">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">YoY Revenue</h3></div><button class="expand-btn" onclick="expandChart('cYoy','YoY Revenue')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cYoy" style="height:230px"></div>
</div>
</div>

<!-- SECTION: Fulfillment -->
<div class="section-hdr"><span>Fulfillment & Shipping</span></div>

<!-- ROW 5: Pipeline + Shipping -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sortable-row" data-row="5">
<div class="dash-card p-5" data-id="pipeline">
<div class="drag-handle mb-4"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Order Fulfillment Pipeline</h3></div>
<div class="flex items-center gap-1 sm:gap-2 mb-4 overflow-x-auto pb-2">
<div class="pipeline-step surface-bg"><div class="text-base font-bold" style="color:#0077b6">312</div><div class="text-[10px] text-gray-500">Received</div><div class="w-full h-1 rounded mt-1.5" style="background:#0077b6"></div></div>
<div class="pipeline-arrow"><i data-lucide="chevron-right" style="width:16px;height:16px"></i></div>
<div class="pipeline-step surface-bg"><div class="text-base font-bold text-yellow-600">45</div><div class="text-[10px] text-gray-500">Processing</div><div class="w-full h-1 bg-yellow-400 rounded mt-1.5"></div></div>
<div class="pipeline-arrow"><i data-lucide="chevron-right" style="width:16px;height:16px"></i></div>
<div class="pipeline-step surface-bg"><div class="text-base font-bold text-orange-500">198</div><div class="text-[10px] text-gray-500">Shipped</div><div class="w-full h-1 bg-orange-400 rounded mt-1.5"></div></div>
<div class="pipeline-arrow"><i data-lucide="chevron-right" style="width:16px;height:16px"></i></div>
<div class="pipeline-step surface-bg"><div class="text-base font-bold text-blue-600">52</div><div class="text-[10px] text-gray-500">Delivered</div><div class="w-full h-1 bg-blue-500 rounded mt-1.5"></div></div>
<div class="pipeline-arrow"><i data-lucide="chevron-right" style="width:16px;height:16px"></i></div>
<div class="pipeline-step surface-bg"><div class="text-base font-bold text-green-600">17</div><div class="text-[10px] text-gray-500">Completed</div><div class="w-full h-1 bg-green-500 rounded mt-1.5"></div></div>
</div>
<div class="text-xs text-gray-600 mb-2">Avg Fulfillment: <strong>2.3 days</strong></div>
<div class="ai-chip"><div class="ai-chip-icon">AI</div><span class="text-xs">12 orders stuck in Processing > 48hrs. Suggest bulk-fulfillment action.</span></div>
</div>
<div class="dash-card p-5" data-id="shipping">
<div class="drag-handle mb-4"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Shipping Performance</h3></div>
<div class="grid grid-cols-3 gap-3 mb-4">
<div class="text-center p-2.5 surface-bg rounded-lg"><div class="text-xl font-bold text-gray-900">94.2%</div><div class="text-[10px] text-gray-500">On-Time</div></div>
<div class="text-center p-2.5 surface-bg rounded-lg"><div class="text-xl font-bold text-gray-900">$6.80</div><div class="text-[10px] text-gray-500">Avg Cost</div></div>
<div class="text-center p-2.5 surface-bg rounded-lg relative"><div class="text-xl font-bold text-gray-900">8</div><div class="text-[10px] text-gray-500">Exceptions</div><span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center">!</span></div>
</div>
<div class="space-y-2.5">
<div class="flex items-center gap-3"><span class="text-xs font-medium text-gray-600 w-12">USPS</span><div class="flex-1"><div class="carrier-bar" style="width:92%">~92%</div></div></div>
<div class="flex items-center gap-3"><span class="text-xs font-medium text-gray-600 w-12">FedEx</span><div class="flex-1"><div class="carrier-bar" style="width:88%">~88%</div></div></div>
<div class="flex items-center gap-3"><span class="text-xs font-medium text-gray-600 w-12">DHL</span><div class="flex-1"><div class="carrier-bar" style="width:95%">~95%</div></div></div>
</div>
</div>
</div>

<!-- SECTION: Inventory & Customer -->
<div class="section-hdr"><span>Inventory, Customers & Profitability</span></div>

<!-- ROW 6: Inventory + Customers + Waterfall -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sortable-row" data-row="6">
<div class="dash-card p-5" data-id="inv">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Inventory Health</h3></div>
<div class="grid grid-cols-4 gap-1.5 mb-3">
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">1,248</div><div class="text-[9px] text-gray-500">Total</div></div>
<div class="text-center p-1.5 rounded-lg bg-green-50"><div class="text-sm font-bold text-green-700">1,102</div><div class="text-[9px] text-gray-500">In Stock</div></div>
<div class="text-center p-1.5 rounded-lg bg-yellow-50"><div class="text-sm font-bold text-yellow-700">98</div><div class="text-[9px] text-gray-500">Low</div></div>
<div class="text-center p-1.5 rounded-lg bg-red-50"><div class="text-sm font-bold text-red-700">48</div><div class="text-[9px] text-gray-500">Out</div></div>
</div>
<div id="cInvBar" style="height:60px"></div>
<div class="mt-2 space-y-1"><div class="text-[10px] font-semibold text-gray-500 mb-1">Top SKUs at Risk</div>
<div class="flex justify-between text-[11px]"><span class="text-gray-700">Blue Hoodie XL</span><span class="text-red-600 font-medium">5d</span></div>
<div class="flex justify-between text-[11px]"><span class="text-gray-700">White Sneakers M</span><span class="text-red-600 font-medium">5d</span></div>
<div class="flex justify-between text-[11px]"><span class="text-gray-700">Black T-Shirt L</span><span class="text-red-600 font-medium">5d</span></div>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">3 top-selling SKUs will stockout within 5 days.</span></div>
</div>
<div class="dash-card p-5" data-id="cust">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Customer Acquisition</h3></div>
<div class="flex items-center gap-4"><div id="cCustDonut" style="min-width:150px;height:150px"></div>
<div class="space-y-2.5 flex-1">
<div class="flex items-center gap-1.5"><i data-lucide="user-plus" style="width:13px;height:13px" class="text-green-600"></i><span class="text-xs text-gray-700">New: <strong>842</strong></span><span class="badge badge-green text-[9px]">+5.1%</span></div>
<div class="flex items-center gap-1.5"><i data-lucide="dollar-sign" style="width:13px;height:13px" class="text-cyan-600"></i><span class="text-xs text-gray-700">CAC: <strong>$12.40</strong></span><span class="badge badge-red text-[9px]">-3%</span></div>
<div class="flex items-center gap-1.5"><i data-lucide="ratio" style="width:13px;height:13px" class="text-blue-600"></i><span class="text-xs text-gray-700">LTV:CAC: <strong>3.2x</strong></span></div>
<div class="flex items-center gap-1.5"><i data-lucide="alert-triangle" style="width:13px;height:13px" class="text-red-500"></i><span class="text-xs text-gray-700">Churn: <strong>14%</strong></span><span class="badge badge-red text-[9px]">+3.2%</span></div>
</div></div>
</div>
<div class="dash-card p-5 md:col-span-2 lg:col-span-1" data-id="waterfall">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Profit & Cost Waterfall</h3></div><button class="expand-btn" onclick="expandChart('cWaterfall','Profit & Cost Waterfall')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cWaterfall" style="height:200px"></div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Discounts & returns = 14.5% of gross. Up 3% vs. last period.</span></div>
</div>
</div>

<!-- SECTION: Goals & Actions -->
<div class="section-hdr"><span>Goals, Discounts & AI Actions</span></div>

<!-- ROW 7: Goals + Discount + AI Actions -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4 sortable-row" data-row="7">
<div class="lg:col-span-5 dash-card p-5" data-id="goals">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Monthly Goal Tracker</h3></div>
<div class="space-y-3">
<div><div class="flex justify-between mb-1"><span class="text-xs text-gray-700 font-medium">Revenue: $150K</span><span class="text-xs font-bold text-green-600">78%</span></div><div class="goal-bar"><div class="goal-fill" style="width:78%;background:linear-gradient(90deg,#0077b6,#00b4d8)"></div></div><div class="text-[10px] text-gray-400 mt-0.5">8 days remaining</div></div>
<div><div class="flex justify-between mb-1"><span class="text-xs text-gray-700 font-medium">Orders: 2,000</span><span class="text-xs font-bold text-yellow-600">65%</span></div><div class="goal-bar"><div class="goal-fill" style="width:65%;background:linear-gradient(90deg,#f59e0b,#fbbf24)"></div></div><div class="text-[10px] text-gray-400 mt-0.5">8 days remaining</div></div>
<div><div class="flex justify-between mb-1"><span class="text-xs text-gray-700 font-medium">Customers: 1,000</span><span class="text-xs font-bold text-green-600">84%</span></div><div class="goal-bar"><div class="goal-fill" style="width:84%;background:linear-gradient(90deg,#10b981,#34d399)"></div></div><div class="text-[10px] text-gray-400 mt-0.5">8 days remaining</div></div>
<div><div class="flex justify-between mb-1"><span class="text-xs text-gray-700 font-medium">Profit Margin: 20%</span><span class="text-xs font-bold" style="color:#0891b2">92%</span></div><div class="goal-bar"><div class="goal-fill" style="width:92%;background:linear-gradient(90deg,#0891b2,#06b6d4)"></div></div><div class="text-[10px] text-gray-400 mt-0.5">8 days remaining</div></div>
<div><div class="flex justify-between mb-1"><span class="text-xs text-gray-700 font-medium">Ad ROAS: 4.0x</span><span class="text-xs font-bold text-red-500">60%</span></div><div class="goal-bar"><div class="goal-fill" style="width:60%;background:linear-gradient(90deg,#ef4444,#f87171)"></div></div><div class="text-[10px] text-gray-400 mt-0.5">8 days remaining</div></div>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">You'll miss Revenue target by ~$12K. Increase Google Shopping spend.</span></div>
</div>
<div class="lg:col-span-3 dash-card p-5" data-id="disc">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Discount & Coupon Health</h3></div>
<div class="grid grid-cols-3 gap-2 mb-3">
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-base font-bold text-gray-900">12</div><div class="text-[9px] text-gray-500">Active</div></div>
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-base font-bold text-gray-900">$12.4K</div><div class="text-[9px] text-gray-500">Discounted</div></div>
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-base font-bold text-gray-900">$8.20</div><div class="text-[9px] text-gray-500">Avg/Order</div></div>
</div>
<div class="space-y-1 text-[11px] text-gray-600 mb-3">
<div class="flex justify-between"><span>SAVE20</span><span class="text-gray-400">500 uses</span></div>
<div class="flex justify-between"><span>WELCOME10</span><span class="text-gray-400">450 uses</span></div>
<div class="flex justify-between"><span>BLACKFRIDAY</span><span class="text-gray-400">300 uses</span></div>
<div class="flex justify-between"><span>VIPONLY</span><span class="text-gray-400">200 uses</span></div>
<div class="flex justify-between"><span>SOCIAL15</span><span class="text-gray-400">100 uses</span></div>
</div>
<div class="leak-alert"><i data-lucide="alert-triangle" style="width:14px;height:14px" class="text-red-500 flex-shrink-0 mt-0.5"></i><span class="text-[10px] text-red-700">SAVE20 leaked to 3 sites. 847 unauthorized uses. -$4,200</span></div>
</div>
<div class="lg:col-span-4 dash-card p-5" data-id="actions">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">AI Action Items</h3></div>
<div class="space-y-1.5">
<div class="action-item"><span class="alert-dot red"></span><div class="flex-1"><div class="text-[11px] font-medium text-gray-800">Restock Blue Hoodie XL - 3 days left</div><span class="badge badge-sea text-[9px] mt-0.5">Inventory</span></div><button class="text-[10px] text-white px-2.5 py-1 rounded font-medium" style="background:#0077b6">Action</button></div>
<div class="action-item"><span class="alert-dot red"></span><div class="flex-1"><div class="text-[11px] font-medium text-gray-800">Disable SAVE20 coupon - $4.2K loss</div><span class="badge badge-sea text-[9px] mt-0.5">Discounts</span></div><button class="text-[10px] surface-bg text-gray-700 px-2.5 py-1 rounded font-medium border" style="border-color:inherit">Disable</button></div>
<div class="action-item"><span class="alert-dot yellow"></span><div class="flex-1"><div class="text-[11px] font-medium text-gray-800">Shift $2.2K budget Meta to Google</div><span class="badge badge-sea text-[9px] mt-0.5">Marketing</span></div><button class="text-[10px] surface-bg text-gray-700 px-2.5 py-1 rounded font-medium border" style="border-color:inherit">Review</button></div>
<div class="action-item"><span class="alert-dot green"></span><div class="flex-1"><div class="text-[11px] font-medium text-gray-800">Win-back flow for 237 customers</div><span class="badge badge-sea text-[9px] mt-0.5">CRM</span></div><button class="text-[10px] surface-bg text-gray-700 px-2.5 py-1 rounded font-medium border" style="border-color:inherit">Set Up</button></div>
<div class="action-item"><span class="alert-dot green"></span><div class="flex-1"><div class="text-[11px] font-medium text-gray-800">Asia-Pacific expansion review +15%</div><span class="badge badge-sea text-[9px] mt-0.5">Strategy</span></div><button class="text-[10px] surface-bg text-gray-700 px-2.5 py-1 rounded font-medium border" style="border-color:inherit">Explore</button></div>
</div>
<a href="#" class="flex items-center justify-center gap-1 text-[11px] font-medium mt-2 hover:underline" style="color:#0077b6">View All 12 Actions</a>
</div>
</div>

</div><!-- end sortableGrid -->
</main>


<!-- ==================== PAGE: SALES & REVENUE ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-sales">

<!-- PAGE TITLE -->
<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 anim">
<div><h1 class="text-xl lg:text-2xl font-bold text-gray-900">Sales & Revenue Analytics</h1><p class="text-sm text-gray-500 mt-1">Deep-dive into performance, trends, and revenue streams.</p></div>
<div class="flex items-center gap-2 flex-wrap"><button class="filter-chip active">30 Days</button><button class="filter-chip">7 Days</button><button class="filter-chip">Today</button><button class="filter-chip"><i data-lucide="sliders" style="width:11px;height:11px"></i>Custom</button></div>
</div>

<!-- AI BRIEF BANNER -->
<div class="ai-brief animate-in d1" style="background:linear-gradient(135deg,#012840 0%,#005f73 40%,#0077b6 70%,#0096c7 100%);border-radius:14px;padding:20px 24px;color:#fff;position:relative;overflow:hidden">
<div class="absolute top-[-60%] right-[-10%] w-[300px] h-[300px]" style="background:radial-gradient(circle,rgba(0,180,216,.15),transparent 70%);border-radius:50%"></div>
<div class="relative z-10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
<div class="flex items-start gap-3">
<div class="ai-chip-icon mt-0.5"><i data-lucide="sparkles" style="width:12px;height:12px"></i></div>
<div>
<div class="font-semibold text-sm mb-1">AI Sales Intelligence</div>
<div class="text-xs" style="color:rgba(179,224,240,.9)">Revenue up 12% WoW driven by SAVE20 promo. Thursday peak hours (2-4PM) show 34% higher AOV. Consider extending flash sale into next week.</div>
</div>
</div>
<button class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-xs font-semibold transition whitespace-nowrap">View Details</button>
</div>
</div>

<!-- KPI ROW: 8 KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3 animate-in d2">
<div class="kpi-card" style="--c:#0077b6"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Total Revenue</div><div class="text-lg font-bold text-gray-900">$142.3K</div><div class="flex items-center justify-between mt-2"><div id="spkSales1" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+12%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Total Orders</div><div class="text-lg font-bold text-gray-900">1,847</div><div class="flex items-center justify-between mt-2"><div id="spkSales2" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+8%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg Order Value</div><div class="text-lg font-bold text-gray-900">$77.02</div><div class="flex items-center justify-between mt-2"><div id="spkSales3" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+3.5%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Gross Profit</div><div class="text-lg font-bold text-gray-900">$52.8K</div><div class="flex items-center justify-between mt-2"><div id="spkSales4" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+15%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Refund Rate</div><div class="text-lg font-bold text-gray-900">2.4%</div><div class="flex items-center justify-between mt-2"><div id="spkSales5" class="w-16 h-7"></div><span class="badge badge-red text-[10px]">+0.3%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Net Revenue</div><div class="text-lg font-bold text-gray-900">$138.9K</div><div class="flex items-center justify-between mt-2"><div id="spkSales6" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+11%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Units Sold</div><div class="text-lg font-bold text-gray-900">3,284</div><div class="flex items-center justify-between mt-2"><div id="spkSales7" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+6%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg Margin</div><div class="text-lg font-bold text-gray-900">37.1%</div><div class="flex items-center justify-between mt-2"><div id="spkSales8" class="w-16 h-7"></div><span class="badge badge-green text-[10px]">+2.1%</span></div></div>
</div>

<!-- ROW 1: Sales Channel + Traffic Source + Device Type -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sortable-row anim d2">
<div class="dash-card p-5"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Sales Channel</h3></div><button class="expand-btn" onclick="expandChart('cSalesChan','Revenue by Sales Channel')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cSalesChan" style="height:240px"></div></div>
<div class="dash-card p-5"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Traffic Source</h3></div><button class="expand-btn" onclick="expandChart('cTrafficSrc','Revenue by Traffic Source')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cTrafficSrc" style="height:240px"></div></div>
<div class="dash-card p-5 md:col-span-2 lg:col-span-1"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Device Type</h3></div><button class="expand-btn" onclick="expandChart('cDevice','Revenue by Device')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cDevice" style="height:240px"></div></div>
</div>

<!-- ROW 2: Net Revenue Waterfall -->
<div class="dash-card p-5 sortable-row anim d3">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Net Revenue Waterfall Chart</h3></div><div class="flex gap-1 items-center"><button class="filter-chip active text-[10px]">Filter by Date</button><button class="filter-chip text-[10px]">Export Data</button><button class="expand-btn" onclick="expandChart('cWaterfallSales','Net Revenue Waterfall')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div></div>
<div id="cWaterfallSales" style="height:300px"></div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Discounts & Refunds account for 14.5% reduction in Gross Revenue. Consider optimizing.</span></div>
</div>

<!-- ROW 3: AOV Trend + Orders by Day -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sortable-row">
<div class="dash-card p-5 anim d3"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">AOV Trend Line</h3></div><button class="expand-btn" onclick="expandChart('cAOV','AOV Trend')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cAOV" style="height:240px"></div></div>
<div class="dash-card p-5 anim d4"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Orders by Day-of-Week</h3></div><button class="expand-btn" onclick="expandChart('cDayOrders','Orders by Day')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cDayOrders" style="height:240px"></div></div>
</div>

<!-- ROW 4: Geo + Cities + Payment + Currency -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sortable-row">
<div class="dash-card p-5 anim d3"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue by Geography</h3></div><button class="expand-btn" onclick="expandChart('cGeo','Revenue by Geography')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cGeo" style="height:250px"></div></div>
<div class="dash-card p-5 anim d4"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Top 10 Cities</h3></div><button class="expand-btn" onclick="expandChart('cCities','Top 10 Cities')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cCities" style="height:250px"></div></div>
<div class="dash-card p-5 anim d4"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Payment Methods</h3></div><button class="expand-btn" onclick="expandChart('cPayment','Payment Methods')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cPayment" style="height:250px"></div></div>
<div class="dash-card p-5 anim d5"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Currency Breakdown</h3></div><button class="expand-btn" onclick="expandChart('cCurrency','Currency Breakdown')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cCurrency" style="height:250px"></div></div>
</div>

<!-- ROW 5: New vs Returning + Refund Rate -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sortable-row">
<div class="dash-card p-5 anim d4"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">New vs Returning Revenue</h3></div><button class="expand-btn" onclick="expandChart('cNewRet','New vs Returning')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cNewRet" style="height:240px"></div></div>
<div class="dash-card p-5 anim d5"><div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Refund/Return Rate Trend</h3></div><button class="expand-btn" onclick="expandChart('cRefund','Refund Rate')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div><div id="cRefund" style="height:240px"></div></div>
</div>

<!-- SECTION: Revenue Trend & Anomaly -->
<div class="section-hdr"><span>Revenue Trend & Anomaly Timeline</span></div>

<!-- ROW 6: Cart Abandonment + Revenue per Session -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sortable-row">
<div class="dash-card p-5 anim d3">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Cart Abandonment Funnel</h3></div><button class="expand-btn" onclick="expandChart('cCartFunnel','Cart Abandonment')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cCartFunnel" style="height:260px"></div>
<div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">Abandonment Rate: 70%</span></div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Revenue anomaly on EU pricing error caused $8.2K loss between 2-5 PM. Resolved. Recovery plan sent.</span></div>
</div>
<div class="dash-card p-5 anim d4">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue per Session & Conversion Economics</h3></div><button class="expand-btn" onclick="expandChart('cRevSession','Revenue per Session')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div class="grid grid-cols-4 gap-2 mb-3">
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">$1.44</div><div class="text-[9px] text-gray-500">Rev/Session</div></div>
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">2.3</div><div class="text-[9px] text-gray-500">Items/Order</div></div>
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">3.2%</div><div class="text-[9px] text-gray-500">Cart-to-Order</div></div>
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">$1.82</div><div class="text-[9px] text-gray-500">Cost/Session</div></div>
</div>
<div id="cRevSession" style="height:180px"></div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Biggest orders fall in $0-$5 range (6% Upsell). Free shipping at 10%. Consider Shopify Payments $420/mo.</span></div>
</div>
</div>

<!-- ROW 7: Transaction Fees + Product Category -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sortable-row">
<div class="dash-card p-5 anim d4">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Transaction Fees & Platform Cost Breakdown</h3></div>
<div class="flex gap-2 mb-3 flex-wrap"><span class="badge badge-sea text-[10px]">Code KPIs</span><span class="badge badge-sea text-[10px]">Avg Discount $3.20</span><span class="badge badge-sea text-[10px]">Discount ROI</span></div>
<div class="overflow-x-auto">
<table class="data-table"><thead><tr class="table-header"><th>Code</th><th>Uses</th><th>Revenue</th><th>Acquired</th><th>ROI</th><th>Status</th></tr></thead>
<tbody>
<tr class="table-row"><td><span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class="font-medium text-gray-800">SAVE20</span></span></td><td class="text-gray-700">1.2K</td><td class="font-semibold text-gray-900">$28K</td><td class="text-gray-700">$3K</td><td class="font-semibold text-green-600">9.3x</td><td><span class="badge badge-green text-[9px]">Active</span></td></tr>
<tr class="table-row"><td><span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class="font-medium text-gray-800">WELCOME10</span></span></td><td class="text-gray-700">800</td><td class="font-semibold text-gray-900">$23K</td><td class="text-gray-700">$3.3K</td><td class="font-semibold text-green-600">7.0x</td><td><span class="badge badge-green text-[9px]">Active</span></td></tr>
<tr class="table-row" style="background:rgba(239,68,68,.06)"><td><span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-red-500"></span><span class="font-medium text-gray-800">FLASH10</span></span></td><td class="text-gray-700">802</td><td class="font-semibold text-gray-900">$1,000</td><td class="text-gray-700">$100</td><td class="font-semibold text-red-600">1.0x</td><td><span class="badge badge-red text-[9px]">Expired</span></td></tr>
</tbody></table></div>
<div class="mt-3"><div class="text-xs font-semibold text-gray-600 mb-2">Discount Effectiveness Analysis</div><div id="cDiscEffect" style="height:130px"></div></div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Code FLASH10 has 1.0x ROI - costing more. Consider retiring or reduce to 5%.</span></div>
</div>
<div class="dash-card p-5 anim d5">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Sales by Product Category</h3></div><div class="flex gap-1"><button class="filter-chip active text-[10px]">By Revenue</button><button class="filter-chip text-[10px]">By Units</button></div></div>
<div id="cCatTree" style="height:300px"></div>
</div>
</div>

<!-- SECTION: Cohort Analysis -->
<div class="section-hdr"><span>Cohort Analysis & Tax</span></div>

<!-- ROW 8: Cohort + Tax + Canceled Orders -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4 sortable-row">
<div class="lg:col-span-5 dash-card p-5 anim d3">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue Cohort Analysis</h3></div><div class="flex gap-1"><button class="filter-chip active text-[10px]">By Revenue</button><button class="filter-chip text-[10px]">By Orders</button></div></div>
<div id="cCohort" style="height:260px"></div>
<div class="text-[10px] text-gray-500 mt-1">Avg Revenue per Cohort at Mo 3: $3.8K | Best: Nov 25 ($28K)</div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Nov 2025 cohort outperforms by 22% - driven by Black Friday. Replicate holiday strategy.</span></div>
</div>
<div class="lg:col-span-4 dash-card p-5 anim d4">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Tax Breakdown by Region</h3></div><button class="expand-btn" onclick="expandChart('cTax','Tax Breakdown')"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button></div>
<div id="cTax" style="height:220px"></div>
<div class="text-[10px] text-gray-500 mt-1">Total Tax Collected: $7,000 | Tax as % of Gross: 4.9%</div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">38% of weekly revenue concentrated in 8 peak hours. Schedule marketing for Thu 9AM.</span></div>
</div>
<div class="lg:col-span-3 dash-card p-5 anim d5">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Canceled & Failed Orders</h3></div>
<div class="space-y-2 mb-3">
<div class="flex items-center justify-between p-2 surface-bg rounded-lg"><span class="text-xs text-gray-600">Canceled Orders</span><div class="flex items-center gap-2"><span class="text-sm font-bold text-gray-900">47</span><span class="badge badge-red text-[9px]">3.2%</span></div></div>
<div class="flex items-center justify-between p-2 surface-bg rounded-lg"><span class="text-xs text-gray-600">Failed Payments</span><div class="flex items-center gap-2"><span class="text-sm font-bold text-gray-900">23</span><span class="badge badge-red text-[9px]">1.6%</span></div></div>
<div class="flex items-center justify-between p-2 surface-bg rounded-lg"><span class="text-xs text-gray-600">Revenue Lost</span><span class="text-sm font-bold text-red-600">$6,840</span></div>
</div>
<div id="cCancelDonut" style="height:140px"></div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Payment failures up 12% this week. 68% from Amex - check gateway.</span></div>
</div>
</div>

<!-- SECTION: Operations -->
<div class="section-hdr"><span>Shipping, Hourly Revenue & Velocity</span></div>

<!-- ROW 9: Shipping + Hourly + Velocity -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 sortable-row">
<div class="dash-card p-5 anim d3">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Shipping Revenue vs Cost</h3></div>
<div class="grid grid-cols-2 gap-2 mb-3">
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold" style="color:#0077b6">$8,420</div><div class="text-[9px] text-gray-500">Charged</div></div>
<div class="text-center p-2 surface-bg rounded-lg"><div class="text-sm font-bold text-red-500">$6,180</div><div class="text-[9px] text-gray-500">Cost</div></div>
</div>
<div id="cShipCost" style="height:180px"></div>
<div class="text-[10px] text-gray-500 mt-1">Margin: $2,240 (26.6%)</div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[10px]">Free shipping orders have 34% higher AOV. Threshold $75 is optimal.</span></div>
</div>
<div class="lg:col-span-2 dash-card p-5 anim d4">
<div class="flex items-center justify-between mb-3"><div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Hourly & Daily Revenue</h3></div><div class="flex gap-1"><button class="filter-chip active text-[10px]">Filter by Date</button><button class="filter-chip text-[10px]">Compare</button></div></div>
<div id="cHourlyHeat" style="height:240px"></div>
<div class="text-[10px] text-gray-500 mt-1">Peak: Thu-Fri 10AM-2PM | Peak Days: Friday & Saturday</div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[10px]">38% of weekly revenue in 8 peak hours. Schedule promos for Thu 9AM.</span></div>
</div>
<div class="lg:col-span-2 dash-card p-5 anim d5">
<div class="drag-handle mb-3"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Sales Velocity Tracker</h3></div>
<div class="grid grid-cols-3 gap-2 mb-3">
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">1.8</div><div class="text-[9px] text-gray-500">Orders/Hr</div></div>
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">$142</div><div class="text-[9px] text-gray-500">Rev/Hr</div></div>
<div class="text-center p-1.5 surface-bg rounded-lg"><div class="text-sm font-bold text-gray-900">4.2</div><div class="text-[9px] text-gray-500">Peak/Hr</div></div>
</div>
<div id="cVelocity" style="height:180px"></div>
<div class="text-[10px] text-gray-500 mt-1">This Week vs Last: +8% velocity increase</div>
<div class="ai-chip mt-2"><div class="ai-chip-icon">AI</div><span class="text-[10px]">Velocity drops 60% 11PM-7AM. Consider automated midnight flash deals.</span></div>
</div>
</div>

<!-- FOOTER -->
<div class="page-footer mt-6">
<div class="flex items-center gap-3">
<button class="footer-btn"><i data-lucide="download" style="width:14px;height:14px"></i>Export Full Report</button>
<button class="footer-btn"><i data-lucide="mail" style="width:14px;height:14px"></i>Schedule Email Report</button>
</div>
<div class="flex items-center gap-4 text-[11px]">
<span>Showing data for: <strong>Last 30 Days</strong></span>
<span>Store: <strong>All Stores</strong></span>
</div>
</div>
</main>


<!-- ==================== PAGE: PRODUCTS ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-products">

<!-- Page Title -->
<div class="flex items-center justify-between">
<h1 class="text-2xl font-bold text-gray-900">Product Intelligence</h1>
</div>

<!-- Tabs -->
<div class="flex items-center gap-2 flex-wrap">
<button class="tab-btn active" onclick="switchProductTab(this,'performance')"><span>Performance</span></button>
<button class="tab-btn" onclick="switchProductTab(this,'margins')"><span>Margins</span></button>
<button class="tab-btn" onclick="switchProductTab(this,'inventory')"><span>Inventory</span></button>
<button class="tab-btn" onclick="switchProductTab(this,'returns')"><span>Returns</span></button>
</div>

<!-- ==================== TAB: PERFORMANCE ==================== -->
<div id="tab-performance" class="tab-content active space-y-4">

<!-- AI Insight Banner -->
<div class="ai-chip" style="padding:12px 16px;border-radius:10px">
<div class="ai-chip-icon" style="width:24px;height:24px;border-radius:6px;font-size:10px">AI</div>
<span class="text-[12px]"><strong>AI:</strong> Blue Hoodie XL shifted from Cash Cow to Dog. Sales <span style="color:#ef4444;font-weight:700">-45%</span>. Consider 20% markdown or bundling. | Sneakers High-Top trending <span style="color:#22c55e;font-weight:700">+32%</span> - Star candidate. | 3 products moved quadrants this month.</span>
<button class="ml-auto text-xs muted-text hover:text-gray-300 transition flex-shrink-0 flex items-center gap-1">Dismiss <i data-lucide="x" style="width:14px;height:14px"></i></button>
</div>

<!-- ROW 1: BCG Matrix + Top 20 & Dead Stock -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- BCG Product Matrix -->
<div class="lg:col-span-7 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">BCG Product Matrix</h3></div>
<button class="expand-btn"><i data-lucide="maximize-2" style="width:14px;height:14px"></i></button>
</div>
<div id="cBCG" style="height:380px"></div>
<div class="text-[10px] muted-text mt-1">Dot size = Units Sold Volume</div>
</div>

<!-- Right Column: Top 20 + Dead Stock -->
<div class="lg:col-span-5 space-y-4">
<!-- Top 20 Products by Revenue -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Top 20 Products by Revenue</h3></div>
</div>
<div class="space-y-2.5">
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">T-Shirt Classic</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:100%;background:linear-gradient(90deg,#059669,#34d399)"></div></div></div><span class="text-xs font-bold text-gray-800">$45,000</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Jeans Slim Fit</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:85%;background:linear-gradient(90deg,#059669,#34d399)"></div></div></div><span class="text-xs font-bold text-gray-800">$38,500</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Sneakers High-Top</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:71%;background:linear-gradient(90deg,#059669,#34d399)"></div></div></div><span class="text-xs font-bold text-gray-800">$32,000</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Hoodie Fleece</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:63%;background:linear-gradient(90deg,#059669,#34d399)"></div></div></div><span class="text-xs font-bold text-gray-800">$28,500</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Backpack Urban</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:55%;background:linear-gradient(90deg,#059669,#34d399)"></div></div></div><span class="text-xs font-bold text-gray-800">$25,000</span></div>
</div>
<div class="flex items-center justify-center mt-3"><i data-lucide="chevron-down" style="width:16px;height:16px" class="muted-text cursor-pointer"></i></div>
</div>

<!-- Dead Stock / Bottom 20 -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Dead Stock / Bottom 20</h3></div>
</div>
<div class="space-y-2.5">
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Old Season Hat</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:100%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div></div><span class="text-xs font-bold text-red-500">180 Days</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Unpopular Scarf</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:83%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div></div><span class="text-xs font-bold text-red-500">150 Days</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Legacy Jacket</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:67%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div></div><span class="text-xs font-bold text-red-500">120 Days</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Slow Mover Belt</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:50%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div></div><span class="text-xs font-bold text-red-500">90 Days</span></div>
<div class="flex items-center justify-between"><span class="text-xs text-gray-700 w-32 truncate">Discounted Shoes</span><div class="flex-1 mx-3"><div class="goal-bar"><div class="goal-fill" style="width:42%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div></div><span class="text-xs font-bold text-red-500">75 Days</span></div>
</div>
<div class="text-[10px] muted-text mt-2 text-right">Days on Hand</div>
</div>
</div>
</div>

<!-- ROW 2: Product Velocity Table + Variant Heatmap -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

<!-- Product Velocity Table -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Product Velocity Table</h3></div>
</div>
<div class="overflow-x-auto">
<table class="data-table">
<thead><tr class="table-header">
<th>Product <i data-lucide="chevron-down" style="width:10px;height:10px;display:inline"></i></th>
<th>Units/Day</th>
<th>Trend</th>
<th>Stock</th>
<th>Days Left</th>
<th>Status <i data-lucide="chevron-down" style="width:10px;height:10px;display:inline"></i></th>
</tr></thead>
<tbody>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-blue-100 flex items-center justify-center"><i data-lucide="shirt" style="width:14px;height:14px" class="text-blue-600"></i></div><span class="font-medium text-gray-800">T-Shirt Classic</span></td>
<td class="text-gray-700">30.5 <span class="text-green-500"></span></td>
<td><div id="spkVel1" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">1,300</td>
<td class="text-gray-700">43</td>
<td><span class="badge badge-green">Healthy</span></td>
</tr>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-indigo-100 flex items-center justify-center"><i data-lucide="scissors" style="width:14px;height:14px" class="text-indigo-600"></i></div><span class="font-medium text-gray-800">Jeans Slim</span></td>
<td class="text-gray-700">15.2 <span class="text-green-500"></span></td>
<td><div id="spkVel2" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">320</td>
<td class="text-gray-700">21</td>
<td><span class="badge badge-yellow">Low</span></td>
</tr>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-orange-100 flex items-center justify-center"><i data-lucide="footprints" style="width:14px;height:14px" class="text-orange-600"></i></div><span class="font-medium text-gray-800">Sneakers</span></td>
<td class="text-gray-700">8.0 <span class="text-green-500"></span></td>
<td><div id="spkVel3" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">35</td>
<td class="text-gray-700">4</td>
<td><span class="badge badge-red">Critical</span></td>
</tr>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-purple-100 flex items-center justify-center"><i data-lucide="cloud" style="width:14px;height:14px" class="text-purple-600"></i></div><span class="font-medium text-gray-800">Hoodie</span></td>
<td class="text-gray-700">3.0 <span class="text-red-500"></span></td>
<td><div id="spkVel4" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">35</td>
<td class="text-gray-700">12</td>
<td><span class="badge badge-yellow">Low</span></td>
</tr>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-red-100 flex items-center justify-center"><i data-lucide="watch" style="width:14px;height:14px" class="text-red-600"></i></div><span class="font-medium text-gray-800">Belt</span></td>
<td class="text-gray-700">4.0 <span class="text-red-500"></span></td>
<td><div id="spkVel5" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">10</td>
<td class="text-gray-700">3</td>
<td><span class="badge badge-red">Critical</span></td>
</tr>
<tr class="table-row">
<td class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-pink-100 flex items-center justify-center"><i data-lucide="wind" style="width:14px;height:14px" class="text-pink-600"></i></div><span class="font-medium text-gray-800">Scarf</span></td>
<td class="text-gray-700">3.0 <span class="text-red-500"></span></td>
<td><div id="spkVel6" style="width:60px;height:24px;display:inline-block"></div></td>
<td class="text-gray-700">2</td>
<td class="text-gray-700">1</td>
<td><span class="badge badge-red">Critical</span></td>
</tr>
</tbody>
</table>
</div>
<!-- Pagination -->
<div class="flex items-center justify-center gap-1 mt-3">
<div class="page-btn"><i data-lucide="chevron-left" style="width:12px;height:12px"></i></div>
<div class="page-btn active">1</div>
<div class="page-btn">2</div>
<div class="page-btn">3</div>
<div class="page-btn muted-text">...</div>
<div class="page-btn">12</div>
<div class="page-btn"><i data-lucide="chevron-right" style="width:12px;height:12px"></i></div>
</div>
</div>

<!-- Variant Heatmap (Size x Color) -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Variant Heatmap (Size x Color)</h3></div>
</div>
<div class="overflow-x-auto">
<table class="w-full" style="border-collapse:separate;border-spacing:6px">
<thead>
<tr>
<th class="text-[10px] muted-text font-semibold w-10"></th>
<th class="text-[10px] muted-text font-semibold text-center">Blue</th>
<th class="text-[10px] muted-text font-semibold text-center">Red</th>
<th class="text-[10px] muted-text font-semibold text-center">Black</th>
<th class="text-[10px] muted-text font-semibold text-center">White</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-[11px] font-semibold muted-text">S</td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.85);color:#fff;height:48px">120</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.85);color:#fff;height:48px">120</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.65);color:#fff;height:48px">75</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.12);color:#6b8299;height:48px">5</div></td>
</tr>
<tr>
<td class="text-[11px] font-semibold muted-text">M</td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.7);color:#fff;height:48px">85</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.7);color:#fff;height:48px">85</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.35);color:#c8d6e5;height:48px">36</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.08);color:#6b8299;height:48px">2</div></td>
</tr>
<tr>
<td class="text-[11px] font-semibold muted-text">L</td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.42);color:#fff;height:48px">45</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.42);color:#fff;height:48px">45</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.42);color:#fff;height:48px">45</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.05);color:#6b8299;height:48px">1</div></td>
</tr>
<tr>
<td class="text-[11px] font-semibold muted-text">XL</td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.2);color:#c8d6e5;height:48px">15</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.2);color:#c8d6e5;height:48px">15</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.2);color:#c8d6e5;height:48px">15</div></td>
<td><div class="hm-cell" style="background:rgba(0,119,182,.12);color:#c8d6e5;height:48px;position:relative">5
<div class="hot-badge">HOT VARIANT</div>
</div></td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-6 text-[10px] muted-text px-2">
<div class="flex items-center gap-2"><span class="text-[10px] muted-text"></span> <span>5 units</span></div>
<div class="flex items-center gap-4">
<span>Light = Low Sales</span>
<span>Dark = High Sales</span>
</div>
</div>
</div>
</div>

<!-- ROW 3: Product Margin Comparison + Product Affinity Network -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

<!-- Product Margin Comparison -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Product Margin Comparison</h3></div>
</div>
<div id="cMarginCompare" style="height:260px"></div>
<div class="flex items-center gap-3 mt-2">
<div class="flex-1 h-px" style="background:rgba(220,38,38,.3)"></div>
<span class="text-[10px] muted-text">Store Avg: 42%</span>
<div class="flex-1 h-px" style="background:rgba(220,38,38,.3)"></div>
</div>
</div>

<!-- Product Affinity Network -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Product Affinity Network</h3></div>
</div>
<div style="position:relative;height:260px;overflow:hidden">
<!-- SVG Lines -->
<svg style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:1">
<line x1="50%" y1="50%" x2="20%" y2="15%" stroke="#0077b6" stroke-width="3" opacity=".4"/>
<line x1="50%" y1="50%" x2="80%" y2="15%" stroke="#0077b6" stroke-width="2" opacity=".3"/>
<line x1="50%" y1="50%" x2="88%" y2="45%" stroke="#0077b6" stroke-width="3" opacity=".5"/>
<line x1="50%" y1="50%" x2="78%" y2="80%" stroke="#0077b6" stroke-width="2" opacity=".35"/>
<line x1="50%" y1="50%" x2="42%" y2="85%" stroke="#0077b6" stroke-width="1.5" opacity=".25"/>
<line x1="50%" y1="50%" x2="12%" y2="70%" stroke="#0077b6" stroke-width="2" opacity=".3"/>
<line x1="50%" y1="50%" x2="15%" y2="42%" stroke="#0077b6" stroke-width="2.5" opacity=".4"/>
<line x1="20%" y1="15%" x2="15%" y2="42%" stroke="#0077b6" stroke-width="1" opacity=".2"/>
<line x1="88%" y1="45%" x2="80%" y2="15%" stroke="#0077b6" stroke-width="1" opacity=".2"/>
<line x1="78%" y1="80%" x2="42%" y2="85%" stroke="#0077b6" stroke-width="1" opacity=".15"/>
</svg>
<!-- Center Node: T-Shirt -->
<div class="affinity-node" style="width:90px;height:90px;left:calc(50% - 45px);top:calc(50% - 45px);background:linear-gradient(135deg,#0077b6,#00b4d8);color:#fff;font-size:13px;font-weight:700;z-index:5;box-shadow:0 4px 20px rgba(0,119,182,.4)">T-Shirt</div>
<!-- Surrounding nodes -->
<div class="affinity-node" style="width:52px;height:52px;left:calc(20% - 26px);top:calc(15% - 26px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:9px">Hat</div>
<div class="affinity-node" style="width:48px;height:48px;left:calc(80% - 24px);top:calc(15% - 24px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:9px">Belt</div>
<div class="affinity-node" style="width:56px;height:56px;left:calc(88% - 28px);top:calc(45% - 28px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:9px">Shoes</div>
<div class="affinity-node" style="width:50px;height:50px;left:calc(78% - 25px);top:calc(80% - 25px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:9px">Socks</div>
<div class="affinity-node" style="width:44px;height:44px;left:calc(42% - 22px);top:calc(85% - 22px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:8px">Belt</div>
<div class="affinity-node" style="width:54px;height:54px;left:calc(12% - 27px);top:calc(70% - 27px);background:#162435;border:2px solid #1c4a65;color:#8aa0b8;font-size:9px">Jeans</div>
<!-- Number labels on lines -->
<div class="absolute text-[9px] font-bold" style="left:33%;top:28%;color:#48cae4;z-index:3">2</div>
<div class="absolute text-[9px] font-bold" style="left:72%;top:28%;color:#48cae4;z-index:3">3</div>
<div class="absolute text-[9px] font-bold" style="left:75%;top:50%;color:#48cae4;z-index:3">3</div>
<div class="absolute text-[9px] font-bold" style="left:28%;top:55%;color:#48cae4;z-index:3">2</div>
<div class="absolute text-[9px] font-bold" style="left:64%;top:72%;color:#48cae4;z-index:3">1</div>
<div class="absolute text-[9px] font-bold" style="left:45%;top:72%;color:#48cae4;z-index:3">1</div>
</div>
<div class="text-[10px] muted-text mt-2">Line thickness = co-purchase frequency | Node size = revenue</div>
</div>
</div>

<!-- ROW 4: Collection Performance + Product Return Rate + Price Elasticity -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

<!-- Collection Performance -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Collection Performance</h3></div>
</div>
<div id="cCollection" style="height:220px"></div>
<div class="flex items-center justify-center gap-4 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#0077b6"></div><span class="text-[10px] muted-text">Revenue</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#06d6a0"></div><span class="text-[10px] muted-text">Units</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#8b5cf6"></div><span class="text-[10px] muted-text">Profit</span></div>
</div>
</div>

<!-- Product Return Rate -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Product Return Rate</h3></div>
</div>
<div id="cReturnRate" style="height:220px"></div>
<div class="flex items-center gap-2 mt-2">
<div class="text-[10px] muted-text">Avg Return Rate: <strong class="text-gray-700">8.2%</strong></div>
</div>
</div>

<!-- Price Elasticity Indicator -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Price Elasticity Indicator</h3></div>
</div>
<div class="space-y-4 mt-2">
<!-- Product 1 -->
<div class="flex items-start gap-3">
<div class="flex-1">
<div class="flex items-center justify-between mb-1">
<span class="text-xs font-medium text-gray-800">T-Shirt Classic | $29</span>
</div>
<div class="goal-bar"><div class="goal-fill" style="width:50%;background:linear-gradient(90deg,#6b8299,#8aa0b8)"></div></div>
<div class="text-[9px] muted-text mt-0.5">Medium</div>
</div>
<div class="flex-shrink-0 w-36">
<div class="ai-chip" style="padding:4px 8px;font-size:9px;border-radius:6px">
<div class="ai-chip-icon" style="width:16px;height:16px;font-size:7px;border-radius:4px">AI</div>
<span>+$3 increase = -2% volume, +8% revenue</span>
</div>
</div>
</div>
<!-- Product 2 -->
<div class="flex items-start gap-3">
<div class="flex-1">
<div class="flex items-center justify-between mb-1">
<span class="text-xs font-medium text-gray-800">Jeans Slim | $89</span>
</div>
<div class="goal-bar"><div class="goal-fill" style="width:25%;background:linear-gradient(90deg,#22c55e,#34d399)"></div></div>
<div class="text-[9px] muted-text mt-0.5">Low</div>
</div>
<div class="flex-shrink-0 w-36">
<div class="ai-chip" style="padding:4px 8px;font-size:9px;border-radius:6px">
<div class="ai-chip-icon" style="width:16px;height:16px;font-size:7px;border-radius:4px">AI</div>
<span>Price increase viable, demand inelastic</span>
</div>
</div>
</div>
<!-- Product 3 -->
<div class="flex items-start gap-3">
<div class="flex-1">
<div class="flex items-center justify-between mb-1">
<span class="text-xs font-medium text-gray-800">Hoodie XL | $45</span>
</div>
<div class="goal-bar"><div class="goal-fill" style="width:85%;background:linear-gradient(90deg,#dc2626,#f87171)"></div></div>
<div class="text-[9px] muted-text mt-0.5">High</div>
</div>
<div class="flex-shrink-0 w-36">
<div class="ai-chip" style="padding:4px 8px;font-size:9px;border-radius:6px">
<div class="ai-chip-icon" style="width:16px;height:16px;font-size:7px;border-radius:4px">AI</div>
<span>Price sensitive - avoid increase</span>
</div>
</div>
</div>
</div>
</div>
</div>

</div><!-- end tab-performance -->


<!-- ==================== TAB: MARGINS ==================== -->
<div id="tab-margins" class="tab-content space-y-4">

<!-- AI Alert Banner -->
<div class="ai-alert-banner">
<div class="flex items-center gap-3">
<div class="ai-chip-icon"><i data-lucide="sparkles" style="width:12px;height:12px"></i></div>
<span class="text-[12px]"><strong>AI:</strong> Margin erosion detected in Hoodies category: -6.2 pts MoM driven by aggressive discounts + rising return rate. | 7 SKUs have negative unit economics after all deductions. Immediate action recommended.</span>
</div>
<button class="text-xs opacity-70 hover:opacity-100 flex items-center gap-1">Dismiss <i data-lucide="x" style="width:14px;height:14px"></i></button>
</div>

<!-- KPI ROW: 6 Margin KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Gross Margin $</div><div class="text-xl font-bold text-gray-900">$48,200</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-green text-[10px]">+4.2%</span><div id="spkMargin1" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Gross Margin %</div><div class="text-xl font-bold text-gray-900">33.8%</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-green text-[10px]">+1.1 pts</span><div id="spkMargin2" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Discount % of Rev</div><div class="text-xl font-bold text-gray-900">8.7%</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+1.2%</span><div id="spkMargin3" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Refund % of Rev</div><div class="text-xl font-bold text-gray-900">5.8%</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+0.6 pts</span><div id="spkMargin4" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Contribution Margin</div><div class="text-xl font-bold text-gray-900">$32,400</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-green text-[10px]">+2.8%</span><div id="spkMargin5" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Negative Margin SKUs</div><div class="text-xl font-bold text-red-500">7</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">Alert</span><div id="spkMargin6" class="w-14 h-6"></div></div></div>
</div>

<!-- ROW 1: Margin Waterfall + Margin Trend + Margin by Vendor + Discount Tradeoff -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- Margin Waterfall -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Margin Waterfall</h3></div>
</div>
<div id="cMarginWaterfall" style="height:260px"></div>
<div class="flex items-center gap-2 mt-3 flex-wrap">
<button class="filter-chip active text-[10px]">All Store</button>
<button class="filter-chip text-[10px]">By Collection</button>
<button class="filter-chip text-[10px]">By Vendor</button>
<button class="filter-chip text-[10px]">By Product Type</button>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">COGS increased 3.2% while revenue remained flat â€” supplier cost pressure on 12 SKUs. Renegotiation recommended.</span></div>
</div>

<!-- Margin % Trend (Weekly) -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Margin % Trend (Weekly)</h3></div>
</div>
<div id="cMarginTrend" style="height:260px"></div>
<div class="flex items-center justify-center gap-4 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#22c55e"></div><span class="text-[10px] muted-text">Margin %</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#f59e0b"></div><span class="text-[10px] muted-text">Discount Rate</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#ef4444"></div><span class="text-[10px] muted-text">Refund Rate</span></div>
</div>
</div>

<!-- Margin by Vendor (Ranked) -->
<div class="lg:col-span-2 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Margin by Vendor (Ranked)</h3></div>
<button class="filter-chip active text-[10px]">By Vendor</button>
</div>
<div id="cVendorMargin" style="height:240px"></div>
<div class="text-[10px] text-center muted-text mt-2">Store Avg: 33.8%</div>
</div>

<!-- Discount vs Margin Tradeoff -->
<div class="lg:col-span-2 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Discount vs Margin Tradeoff</h3></div>
<span class="text-[10px] muted-text">By Product Type</span>
</div>
<div id="cDiscountTradeoff" style="height:240px"></div>
<div class="flex items-center justify-center gap-2 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#22c55e"></div><span class="text-[10px] muted-text">Sweet Spot</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#ef4444"></div><span class="text-[10px] muted-text">Danger Zone</span></div>
</div>
</div>
</div>

<!-- ROW 2: SKU-Level Margin Table + Price Ladder + Variant Margin Heatmap -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- SKU-Level Margin & Leak Table -->
<div class="lg:col-span-6 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">SKU-Level Margin & Leak Table</h3></div>
</div>
<div class="overflow-x-auto">
<table class="data-table text-[10px]">
<thead><tr class="table-header">
<th>SKU</th><th>Product / Variant</th><th>Revenue</th><th>Units</th><th>COGS</th><th>Gross Profit</th><th>Margin %</th><th>Discount $</th><th>Refund $</th><th>Return %</th><th>Leak Flag</th><th>Action</th>
</tr></thead>
<tbody>
<tr class="table-row">
<td class="font-medium">SKU-123</td>
<td>T-Shirt Classic / Blue M</td>
<td class="font-semibold">$45,000</td>
<td>1,500</td>
<td>$12,000</td>
<td>$33,000</td>
<td class="text-green-600 font-semibold">73.3%</td>
<td>$2,100</td>
<td>$800</td>
<td>2.1%</td>
<td><span class="flex items-center gap-1"><span class="status-dot green"></span>Healthy</span></td>
<td>â€”</td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-456</td>
<td>Jeans Slim / Black L</td>
<td class="font-semibold">$38,500</td>
<td>430</td>
<td>$15,000</td>
<td>$23,500</td>
<td class="text-green-600 font-semibold">61.0%</td>
<td>$4,500</td>
<td>$2,200</td>
<td>8.4%</td>
<td><span class="flex items-center gap-1"><span class="status-dot yellow"></span>Watch</span></td>
<td><button class="action-btn-blue">Review</button></td>
</tr>
<tr class="table-row" style="background:rgba(239,68,68,.08)">
<td class="font-medium">SKU-789</td>
<td>Hoodie XL / Gray</td>
<td class="font-semibold">$12,000</td>
<td>200</td>
<td>$8,500</td>
<td>$3,500</td>
<td class="text-yellow-600 font-semibold">29.2%</td>
<td>$3,800</td>
<td>$1,600</td>
<td>14.2%</td>
<td><span class="flex items-center gap-1"><span class="status-dot red"></span>Discount-heavy</span></td>
<td><button class="action-btn-red">Stop Discount</button></td>
</tr>
<tr class="table-row" style="background:rgba(239,68,68,.12)">
<td class="font-medium">SKU-321</td>
<td>Scarf Bundle</td>
<td class="font-semibold">$4,200</td>
<td>120</td>
<td>$3,800</td>
<td>$400</td>
<td class="text-red-600 font-semibold">9.5%</td>
<td>$1,200</td>
<td>$600</td>
<td>12.0%</td>
<td><span class="flex items-center gap-1"><span class="status-dot red"></span>Negative Risk</span></td>
<td><button class="action-btn-yellow">Bundle/Remove</button></td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-555</td>
<td>Sneakers / White M</td>
<td class="font-semibold">$32,000</td>
<td>280</td>
<td>$12,000</td>
<td>$20,000</td>
<td class="text-green-600 font-semibold">62.5%</td>
<td>$1,800</td>
<td>$1,760</td>
<td>7.9%</td>
<td><span class="flex items-center gap-1"><span class="status-dot green"></span>Healthy</span></td>
<td>â€”</td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-3">
<div class="flex items-center gap-1">
<div class="page-btn"><i data-lucide="chevron-left" style="width:12px;height:12px"></i></div>
<div class="page-btn active">1</div>
<div class="page-btn">2</div>
<div class="page-btn">3</div>
<div class="page-btn muted-text">...</div>
<div class="page-btn">24</div>
<div class="page-btn"><i data-lucide="chevron-right" style="width:12px;height:12px"></i></div>
</div>
<div class="flex items-center gap-2">
<span class="text-[10px] muted-text">Show:</span>
<button class="filter-chip active text-[10px]">10</button>
<button class="filter-chip text-[10px]">25</button>
<button class="filter-chip text-[10px]">50</button>
</div>
</div>
</div>

<!-- Price Ladder by Category -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Price Ladder by Category</h3></div>
</div>
<div class="flex items-center justify-center gap-3 mb-3">
<div class="flex items-center gap-1"><div class="w-3 h-3 rounded" style="background:#0077b6"></div><span class="text-[10px] muted-text">Apparel</span></div>
<div class="flex items-center gap-1"><div class="w-3 h-3 rounded" style="background:#22c55e"></div><span class="text-[10px] muted-text">Accessories</span></div>
<div class="flex items-center gap-1"><div class="w-3 h-3 rounded" style="background:#8b5cf6"></div><span class="text-[10px] muted-text">Footwear</span></div>
</div>
<div id="cPriceLadder" style="height:240px"></div>
<div class="text-[10px] text-center muted-text mt-2">Price gap opportunity</div>
</div>

<!-- Variant Margin Heatmap -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Variant Margin Heatmap</h3></div>
</div>
<div class="overflow-x-auto">
<table class="w-full" style="border-collapse:separate;border-spacing:4px">
<thead>
<tr>
<th class="text-[10px] muted-text font-semibold w-8"></th>
<th class="text-[10px] muted-text font-semibold text-center">Blue</th>
<th class="text-[10px] muted-text font-semibold text-center">Red</th>
<th class="text-[10px] muted-text font-semibold text-center">Black</th>
<th class="text-[10px] muted-text font-semibold text-center">White</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-[10px] font-semibold muted-text">S</td>
<td><div class="variant-heatmap-cell" style="background:#15803d;color:#fff">62%</div></td>
<td><div class="variant-heatmap-cell" style="background:#16a34a;color:#fff">58%</div></td>
<td><div class="variant-heatmap-cell" style="background:#22c55e;color:#fff">52%</div></td>
<td><div class="variant-heatmap-cell" style="background:#86efac;color:#1a2b3c">48%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">M</td>
<td><div class="variant-heatmap-cell" style="background:#16a34a;color:#fff">55%</div></td>
<td><div class="variant-heatmap-cell" style="background:#22c55e;color:#fff">51%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fbbf24;color:#1a2b3c">45%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fbbf24;color:#1a2b3c">42%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">L</td>
<td><div class="variant-heatmap-cell" style="background:#22c55e;color:#fff">48%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fbbf24;color:#1a2b3c">44%</div></td>
<td><div class="variant-heatmap-cell" style="background:#f59e0b;color:#fff">38%</div></td>
<td><div class="variant-heatmap-cell" style="background:#f87171;color:#fff">30%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">XL</td>
<td><div class="variant-heatmap-cell" style="background:#fbbf24;color:#1a2b3c">40%</div></td>
<td><div class="variant-heatmap-cell" style="background:#f59e0b;color:#fff">35%</div></td>
<td><div class="variant-heatmap-cell" style="background:#ef4444;color:#fff">22%</div></td>
<td><div class="variant-heatmap-cell" style="background:#dc2626;color:#fff;position:relative">8%<i data-lucide="alert-triangle" style="width:12px;height:12px;position:absolute;top:2px;right:2px"></i></div></td>
</tr>
</tbody>
</table>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[10px]">XL variants have 18 pts lower margin than S. Consider premium pricing for XL sizes.</span></div>
</div>
</div>

</div><!-- end tab-margins -->


<!-- ==================== TAB: INVENTORY ==================== -->
<div id="tab-inventory" class="tab-content space-y-4">

<!-- AI Alert Banner -->
<div class="ai-alert-banner">
<div class="flex items-center gap-3">
<div class="ai-chip-icon"><i data-lucide="sparkles" style="width:12px;height:12px"></i></div>
<span class="text-[12px]"><strong>AI:</strong> Stockout risk â€” Sneakers High-Top will deplete in 4 days at current velocity. Incoming shipment insufficient. | 48 SKUs out of stock, $34K tied up in dead stock >120 days.</span>
</div>
<button class="text-xs opacity-70 hover:opacity-100 flex items-center gap-1">Dismiss <i data-lucide="x" style="width:14px;height:14px"></i></button>
</div>

<!-- KPI ROW: 6 Inventory KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Total SKUs Tracked</div><div class="text-xl font-bold text-gray-900">1,248</div><div class="mt-2"><i data-lucide="package" style="width:16px;height:16px" class="muted-text"></i></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">In Stock</div><div class="text-xl font-bold text-green-600">1,102</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-green text-[10px]">88.3%</span><div class="goal-bar flex-1"><div class="goal-fill" style="width:88%;background:#22c55e"></div></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Low Stock</div><div class="text-xl font-bold text-yellow-600">98</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-yellow text-[10px]">7.8%</span><div class="goal-bar flex-1"><div class="goal-fill" style="width:8%;background:#f59e0b"></div></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Out of Stock</div><div class="text-xl font-bold text-red-500">48</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">3.9%</span><div class="goal-bar flex-1"><div class="goal-fill" style="width:4%;background:#ef4444"></div></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Inventory Value</div><div class="text-xl font-bold text-gray-900">$284,500</div><div class="flex items-center gap-2 mt-2"><div id="spkInvVal" class="w-16 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg Weeks of Cover</div><div class="text-xl font-bold text-gray-900">6.2 wks</div><div class="flex items-center gap-2 mt-2"><div id="spkCover" class="w-16 h-6"></div><span class="badge badge-green text-[10px]">-0.4</span></div></div>
</div>

<!-- ROW 1: Stockout Risk Heatmap + Inventory Aging + Inventory by Location -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- Stockout Risk Heatmap (SKU Ã— Weeks) -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Stockout Risk Heatmap (SKU Ã— Weeks)</h3></div>
</div>
<div class="flex items-center gap-3 mb-3">
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class="text-[10px] muted-text">Low Risk</span></div>
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-yellow-500"></span><span class="text-[10px] muted-text">Medium Risk</span></div>
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-red-500"></span><span class="text-[10px] muted-text">High Risk</span></div>
</div>
<div id="cStockoutHeatmap" style="height:280px"></div>
<div class="text-[10px] text-center muted-text mt-2">Weeks to depletion</div>
</div>

<!-- Inventory Aging Distribution -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Inventory Aging Distribution</h3></div>
</div>
<div id="cInvAging" style="height:240px"></div>
<div class="flex items-center justify-between mt-2">
<span class="text-[10px] muted-text">Dead stock value:</span>
<span class="text-[10px] font-semibold text-red-500">$34,200 (12% of inventory value)</span>
</div>
</div>

<!-- Inventory by Location -->
<div class="lg:col-span-5 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Inventory by Location</h3></div>
<div class="flex gap-1">
<button class="filter-chip active text-[10px]">Available</button>
<button class="filter-chip text-[10px]">On Hand</button>
<button class="filter-chip text-[10px]">Committed</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="data-table text-[10px]">
<thead><tr class="table-header">
<th>SKU / Product</th><th>Warehouse A</th><th>Warehouse B</th><th>Store NYC</th><th>Store LA</th><th>Store London</th>
</tr></thead>
<tbody>
<tr class="table-row">
<td class="font-medium">Sneakers High-Top</td>
<td class="bg-blue-100/30 text-center font-semibold">245 <span class="text-[8px]">+50</span></td>
<td class="text-center">240</td>
<td class="text-center">70</td>
<td class="text-center">120</td>
<td class="text-center">120</td>
</tr>
<tr class="table-row">
<td class="font-medium">Jeans Slim/Black</td>
<td class="text-center">320</td>
<td class="text-center">500</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="text-center">80</td>
<td class="text-center">76</td>
</tr>
<tr class="table-row">
<td class="font-medium">Belt Leather</td>
<td class="text-center">10</td>
<td class="text-center">120</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="text-center">50</td>
</tr>
<tr class="table-row">
<td class="font-medium">Hat Wool</td>
<td class="text-center">580</td>
<td class="text-center">320</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="text-center">30</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
</tr>
<tr class="table-row">
<td class="font-medium">Backpack Urban</td>
<td class="text-center">125</td>
<td class="text-center">125</td>
<td class="text-center">15</td>
<td class="text-center">43</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
</tr>
<tr class="table-row">
<td class="font-medium">Product F</td>
<td class="text-center">260</td>
<td class="text-center">160</td>
<td class="text-center">30</td>
<td class="text-center">64</td>
<td class="text-center">80</td>
</tr>
<tr class="table-row">
<td class="font-medium">Hoodie Fleece</td>
<td class="text-center">30</td>
<td class="text-center">60</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
<td class="bg-red-100/30 text-center font-semibold text-red-600">0</td>
</tr>
</tbody>
</table>
</div>
<div class="mt-3 p-3 surface-bg rounded-lg">
<div class="grid grid-cols-2 gap-2 text-[10px]">
<div><span class="muted-text">Total Available:</span> <span class="font-semibold">14,280</span></div>
<div><span class="muted-text">Total Incoming:</span> <span class="font-semibold">2,400</span></div>
<div><span class="muted-text">Total Committed:</span> <span class="font-semibold">890</span></div>
<div><span class="muted-text text-red-500">Oversell Risk:</span> <span class="font-semibold text-red-500">3 SKUs</span></div>
</div>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Warehouse A has 68% of total stock. Store NYC running low on 12 SKUs â€” consider inter-location transfer.</span></div>
</div>
</div>

<!-- ROW 2: Reorder Suggestions + Stockout Events Timeline -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

<!-- Reorder Suggestions -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Reorder Suggestions</h3></div>
<div class="flex gap-2">
<button class="footer-btn text-[10px] py-1.5 px-3"><i data-lucide="download" style="width:12px;height:12px"></i>Export Reorder CSV</button>
<button class="action-btn-blue text-[10px] py-1.5 px-3"><i data-lucide="plus" style="width:12px;height:12px"></i>Create Draft PO</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="data-table text-[10px]">
<thead><tr class="table-header">
<th>SKU</th><th>Product</th><th>Available</th><th>Velocity/Day</th><th>Lead Time</th><th>Safety Stock</th><th>Reorder Point</th><th>Suggested Qty</th><th>Priority</th>
</tr></thead>
<tbody>
<tr class="table-row">
<td class="font-medium">SKU-789</td>
<td>Sneakers High-Top</td>
<td class="font-semibold text-red-500">35</td>
<td>8.0</td>
<td>7 days</td>
<td>20</td>
<td>76</td>
<td class="font-semibold">120</td>
<td><span class="flex items-center gap-1"><span class="status-dot red"></span>Urgent</span></td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-456</td>
<td>Jeans Slim / Black</td>
<td>320</td>
<td>15.2</td>
<td>10 days</td>
<td>40</td>
<td>192</td>
<td class="font-semibold">200</td>
<td><span class="flex items-center gap-1"><span class="status-dot yellow"></span>Soon</span></td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-101</td>
<td>Belt Leather</td>
<td class="font-semibold text-red-500">10</td>
<td>4.0</td>
<td>5 days</td>
<td>10</td>
<td>30</td>
<td class="font-semibold">50</td>
<td><span class="flex items-center gap-1"><span class="status-dot red"></span>Urgent</span></td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-202</td>
<td>Hat Wool</td>
<td>580</td>
<td>2.0</td>
<td>14 days</td>
<td>15</td>
<td>43</td>
<td class="font-semibold text-gray-400">â€”</td>
<td><span class="flex items-center gap-1"><span class="status-dot green"></span>OK</span></td>
</tr>
<tr class="table-row">
<td class="font-medium">SKU-303</td>
<td>Backpack Urban</td>
<td>125</td>
<td>5.5</td>
<td>8 days</td>
<td>20</td>
<td>64</td>
<td class="font-semibold">80</td>
<td><span class="flex items-center gap-1"><span class="status-dot yellow"></span>Soon</span></td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-3">
<div class="flex items-center gap-2">
<button class="footer-btn text-[10px] py-1.5 px-3"><i data-lucide="download" style="width:12px;height:12px"></i>Export Reorder CSV</button>
<button class="action-btn-blue text-[10px] py-1.5 px-3"><i data-lucide="plus" style="width:12px;height:12px"></i>Create Draft PO</button>
</div>
</div>
</div>

<!-- Stockout Events Timeline & Lost Sales -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Stockout Events Timeline & Lost Sales</h3></div>
<div class="flex gap-2 text-[10px]">
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-red-500"></span>High Priority</div>
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-yellow-500"></span>Medium</div>
<div class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-blue-500"></span>Order Due</div>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full text-[10px]">
<thead>
<tr class="text-left muted-text">
<th class="pb-2">Product</th>
<th class="pb-2" colspan="31">October Timeline</th>
</tr>
<tr class="text-center muted-text text-[9px]">
<th></th>
<th>1</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th><th>30</th><th>31</th>
</tr>
</thead>
<tbody>
<tr>
<td class="py-2 font-medium">Sneakers High-Top</td>
<td colspan="7"></td>
<td colspan="7" class="timeline-bar urgent">Oct 8 - Oct 14 (6 days)</td>
<td colspan="16"></td>
</tr>
<tr>
<td class="py-1 text-[9px] muted-text pl-4" colspan="31">Est. Lost Revenue: $4,800</td>
</tr>
<tr>
<td class="py-2 font-medium">Belt Leather</td>
<td colspan="17"></td>
<td colspan="5" class="timeline-bar soon">Oct 18 - Oct 22</td>
<td colspan="9"></td>
</tr>
<tr>
<td class="py-1 text-[9px] muted-text pl-4" colspan="31">Est. Lost: $1,200</td>
</tr>
<tr>
<td class="py-2 font-medium">Hoodie Fleece</td>
<td colspan="24"></td>
<td colspan="4" class="timeline-bar urgent">Oct 25 - Oct 28</td>
<td colspan="3"></td>
</tr>
<tr>
<td class="py-1 text-[9px] muted-text pl-4" colspan="31">Est. Lost: $2,100</td>
</tr>
</tbody>
</table>
</div>
<div class="mt-3 p-3 bg-red-50 border border-red-100 rounded-lg">
<div class="text-center">
<div class="text-[11px] text-gray-600">Total Estimated Lost Revenue from Stockouts:</div>
<div class="text-lg font-bold text-red-600">$8,100</div>
</div>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">Stockouts cost ~$8.1K this month. Auto-reorder triggers could have prevented 72% of lost sales.</span></div>
</div>
</div>

</div><!-- end tab-inventory -->


<!-- ==================== TAB: RETURNS ==================== -->
<div id="tab-returns" class="tab-content space-y-4">

<!-- AI Alert Banner -->
<div class="ai-alert-banner">
<div class="flex items-center gap-3">
<div class="ai-chip-icon"><i data-lucide="sparkles" style="width:12px;height:12px"></i></div>
<span class="text-[12px]"><strong>AI:</strong> Return spike detected â€” Jeans Slim Fit return rate +4.1 pts WoW. Concentrated in Size L / Color Black. | Overall return rate trending up 0.8% MoM â€” investigate sizing accuracy.</span>
</div>
<button class="text-xs opacity-70 hover:opacity-100 flex items-center gap-1">Dismiss <i data-lucide="x" style="width:14px;height:14px"></i></button>
</div>

<!-- KPI ROW: 6 Returns KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Return Rate %</div><div class="text-xl font-bold text-gray-900">8.2%</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+0.8%</span><div id="spkReturn1" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Total Refunds $</div><div class="text-xl font-bold text-gray-900">$8,200</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+12%</span><div id="spkReturn2" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Units Returned</div><div class="text-xl font-bold text-gray-900">347</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+8%</span><div id="spkReturn3" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Refund % of Revenue</div><div class="text-xl font-bold text-gray-900">5.8%</div><div class="flex items-center gap-2 mt-2"><span class="badge badge-red text-[10px]">+0.4 pts</span><div id="spkReturn4" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg Time to Return</div><div class="text-xl font-bold text-gray-900">8.4 days</div><div class="flex items-center gap-2 mt-2"><div id="spkReturn5" class="w-14 h-6"></div></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Return Outliers</div><div class="text-xl font-bold text-red-500">5 SKUs</div><div class="flex items-center gap-2 mt-2"><i data-lucide="alert-circle" style="width:16px;height:16px" class="text-red-500"></i></div></div>
</div>

<!-- ROW 1: Return Trend + Return Reasons + Return Rate vs Revenue + Variant Return Heatmap -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- Refund/Return Rate Trend (Weekly) -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Refund/Return Rate Trend (Weekly)</h3></div>
</div>
<div id="cReturnTrend" style="height:260px"></div>
<div class="flex items-center justify-center gap-4 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#8b5cf6"></div><span class="text-[10px] muted-text">Refund $</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#0077b6"></div><span class="text-[10px] muted-text">Return Rate %</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#f59e0b"></div><span class="text-[10px] muted-text">AI Anomaly</span></div>
</div>
</div>

<!-- Return Reasons Breakdown -->
<div class="lg:col-span-2 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Return Reasons Breakdown</h3></div>
</div>
<div id="cReturnReasons" style="height:200px"></div>
<div class="text-center mt-2">
<div class="text-2xl font-bold text-gray-900">347</div>
<div class="text-[10px] muted-text">Total Returns</div>
</div>
<div class="text-[9px] muted-text text-center mt-2">*Reasons captured via return portal. 12% uncategorized.</div>
</div>

<!-- Return Rate vs Revenue (Scatter) -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Return Rate vs Revenue (Scatter)</h3></div>
</div>
<div id="cReturnScatter" style="height:260px"></div>
<div class="flex items-center justify-center gap-2 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#22c55e"></div><span class="text-[10px] muted-text">Ideal</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#ef4444"></div><span class="text-[10px] muted-text">Danger Zone</span></div>
</div>
</div>

<!-- Variant Return Heatmap (Size Ã— Color) -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Variant Return Heatmap (Size Ã— Color)</h3></div>
</div>
<div class="overflow-x-auto">
<table class="w-full" style="border-collapse:separate;border-spacing:4px">
<thead>
<tr>
<th class="text-[10px] muted-text font-semibold w-8"></th>
<th class="text-[10px] muted-text font-semibold text-center">Blue</th>
<th class="text-[10px] muted-text font-semibold text-center">Red</th>
<th class="text-[10px] muted-text font-semibold text-center">Black</th>
<th class="text-[10px] muted-text font-semibold text-center">White</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-[10px] font-semibold muted-text">S</td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">3%</div></td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">4%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">5%</div></td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">2%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">M</td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">5%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">6%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">8%</div></td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">4%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">L</td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">8%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fecaca;color:#991b1b">9%</div></td>
<td><div class="variant-heatmap-cell" style="background:#dc2626;color:#fff;position:relative">18%<i data-lucide="alert-triangle" style="width:12px;height:12px;position:absolute;top:2px;right:2px"></i></div></td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">7%</div></td>
</tr>
<tr>
<td class="text-[10px] font-semibold muted-text">XL</td>
<td><div class="variant-heatmap-cell" style="background:#fef08a;color:#854d0e">6%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fecaca;color:#991b1b">7%</div></td>
<td><div class="variant-heatmap-cell" style="background:#fecaca;color:#991b1b">12%</div></td>
<td><div class="variant-heatmap-cell" style="background:#bbf7d0;color:#166534">5%</div></td>
</tr>
</tbody>
</table>
</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[10px]">Size L Black returns are 2.2x avg. Most common reason: 'Wrong Size'. Suggest updating size guide.</span></div>
</div>
</div>

<!-- ROW 2: New vs Returning Returns + Top Return SKUs Table -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

<!-- Returns: New vs Returning Customers -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Returns: New vs Returning Customers</h3></div>
</div>
<div class="grid grid-cols-2 gap-4">
<div>
<div class="text-[11px] font-semibold mb-2">Return Rate</div>
<div class="space-y-3">
<div>
<div class="flex items-center justify-between text-[10px] mb-1"><span>New Customers</span><span class="font-semibold text-red-600">12.4%</span></div>
<div class="goal-bar"><div class="goal-fill" style="width:62%;background:linear-gradient(90deg,#ef4444,#f87171)"></div></div>
<div class="text-[9px] text-gray-500 mt-0.5">$5,100</div>
</div>
<div>
<div class="flex items-center justify-between text-[10px] mb-1"><span>Returning Customers</span><span class="font-semibold text-green-600">4.8%</span></div>
<div class="goal-bar"><div class="goal-fill" style="width:24%;background:linear-gradient(90deg,#22c55e,#34d399)"></div></div>
<div class="text-[9px] text-gray-500 mt-0.5">$3,100</div>
</div>
</div>
</div>
<div class="flex flex-col items-center justify-center">
<div id="cReturnDonut" style="height:140px;width:140px"></div>
<div class="text-center mt-2">
<div class="text-lg font-bold text-gray-900">347</div>
<div class="text-[10px] muted-text">Returns</div>
</div>
</div>
</div>
<div class="mt-3 text-[10px] text-center text-gray-600">New customers return 2.6Ã— more than returning customers</div>
<div class="ai-chip mt-3"><div class="ai-chip-icon">AI</div><span class="text-[11px]">First-time buyer returns concentrated in Jeans + Hoodies categories. Likely sizing unfamiliarity â€” add size quiz recommendation.</span></div>
</div>

<!-- Top Return SKUs â€” Action Table -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Top Return SKUs â€” Action Table</h3></div>
</div>
<div class="overflow-x-auto">
<table class="data-table text-[10px]">
<thead><tr class="table-header">
<th>#</th><th>SKU</th><th>Product / Variant</th><th>Sold</th><th>Returned</th><th>Return Rate</th><th>Refund $</th><th>Margin Impact</th><th>Time-to-Return</th><th>Top Reason</th><th>Action</th>
</tr></thead>
<tbody>
<tr class="table-row">
<td>1</td>
<td class="font-medium">SKU-456</td>
<td>Jeans Slim / Black L</td>
<td>430</td>
<td>72</td>
<td class="font-semibold text-red-600">16.7%</td>
<td>$6,408</td>
<td class="font-semibold text-red-600">-$4,200</td>
<td>6.2 days</td>
<td>Wrong Size</td>
<td><button class="action-btn-blue">Update Size Guide</button></td>
</tr>
<tr class="table-row">
<td>2</td>
<td class="font-medium">SKU-789</td>
<td>Hoodie XL / Gray</td>
<td>200</td>
<td>28</td>
<td class="font-semibold text-red-600">14.0%</td>
<td>$1,260</td>
<td class="font-semibold text-red-600">-$980</td>
<td>8.1 days</td>
<td>Not as Described</td>
<td><button class="action-btn-yellow">Improve Photos</button></td>
</tr>
<tr class="table-row">
<td>3</td>
<td class="font-medium">SKU-321</td>
<td>Scarf Bundle</td>
<td>120</td>
<td>14</td>
<td class="font-semibold text-yellow-600">11.7%</td>
<td>$588</td>
<td class="font-semibold text-red-600">-$340</td>
<td>12.4 days</td>
<td>Quality Issue</td>
<td><button class="action-btn-green">Quality Check</button></td>
</tr>
<tr class="table-row">
<td>4</td>
<td class="font-medium">SKU-555</td>
<td>Sneakers / White M</td>
<td>280</td>
<td>22</td>
<td class="font-semibold text-yellow-600">7.9%</td>
<td>$1,760</td>
<td class="font-semibold text-red-600">-$620</td>
<td>5.8 days</td>
<td>Damaged Transit</td>
<td><button class="action-btn-red">Change Packaging</button></td>
</tr>
<tr class="table-row">
<td>5</td>
<td class="font-medium">SKU-102</td>
<td>T-Shirt / Red S</td>
<td>650</td>
<td>39</td>
<td class="font-semibold text-green-600">6.0%</td>
<td>$1,131</td>
<td class="font-semibold text-red-600">-$410</td>
<td>9.2 days</td>
<td>Changed Mind</td>
<td><span class="text-gray-400">â€”</span></td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-3">
<div class="flex items-center gap-1">
<div class="page-btn"><i data-lucide="chevron-left" style="width:12px;height:12px"></i></div>
<div class="page-btn active">1</div>
<div class="page-btn">2</div>
<div class="page-btn">3</div>
<div class="page-btn muted-text">...</div>
<div class="page-btn">8</div>
<div class="page-btn"><i data-lucide="chevron-right" style="width:12px;height:12px"></i></div>
</div>
<button class="footer-btn text-[10px] py-1.5 px-3"><i data-lucide="download" style="width:12px;height:12px"></i>Export Returns Report</button>
</div>
</div>
</div>

</div><!-- end tab-returns -->

</main>


<!-- ==================== PAGE: CUSTOMER INTELLIGENCE ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-customers">

<!-- Page Title -->
<div class="flex items-center justify-between">
<h1 class="text-2xl font-bold text-gray-900">Customer Intelligence</h1>
</div>

<!-- KPI ROW: 7 Customer KPIs -->
<div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3 animate-in d1">
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Total Customers</div><div class="text-xl font-bold text-gray-900">12,847</div><div class="flex items-center justify-between mt-2"><div id="spkCust1" class="w-14 h-6"></div><span class="badge badge-green text-[9px]">+2.3%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">New This Month</div><div class="text-xl font-bold text-gray-900">842</div><div class="flex items-center justify-between mt-2"><div id="spkCust2" class="w-14 h-6"></div><span class="badge badge-red text-[9px]">-5.1%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Repeat Rate</div><div class="text-xl font-bold text-gray-900">28.4%</div><div class="flex items-center justify-between mt-2"><div id="spkCust3" class="w-14 h-6"></div><span class="badge badge-green text-[9px]">+1.8%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg LTV</div><div class="text-xl font-bold text-gray-900">$186</div><div class="flex items-center justify-between mt-2"><div id="spkCust4" class="w-14 h-6"></div><span class="badge badge-green text-[9px]">+0.5%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Repeat Risk</div><div class="text-xl font-bold text-gray-900">4%</div><div class="flex items-center justify-between mt-2"><div id="spkCust5" class="w-14 h-6"></div><span class="badge badge-green text-[9px]">+0.5%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Avg LTV</div><div class="text-xl font-bold text-gray-900">$186</div><div class="flex items-center justify-between mt-2"><div id="spkCust6" class="w-14 h-6"></div><span class="badge badge-green text-[9px]">+0.5%</span></div></div>
<div class="kpi-card"><div class="text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-1">Churn Risk</div><div class="text-xl font-bold text-gray-900">14%</div><div class="flex items-center justify-between mt-2"><div id="spkCust7" class="w-14 h-6"></div><span class="badge badge-red text-[9px]">+3.2%</span></div></div>
</div>

<!-- ROW 1: Cohort Retention Grid + Cohort Revenue Retention + LTV Distribution -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- Monthly Cohort Retention Grid -->
<div class="lg:col-span-5 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Monthly Cohort Retention Grid</h3></div>
</div>
<div class="overflow-x-auto">
<table class="w-full text-[10px]">
<thead>
<tr>
<th class="cohort-header">Cohort</th>
<th class="cohort-header">Mo 0</th>
<th class="cohort-header">Mo 1</th>
<th class="cohort-header">Mo 2</th>
<th class="cohort-header">Mo 3</th>
<th class="cohort-header">Mo 4</th>
<th class="cohort-header">Mo 5</th>
<th class="cohort-header">Mo 6</th>
<th class="cohort-header">Mo 7</th>
<th class="cohort-header">Mo 8</th>
<th class="cohort-header">Mo 9</th>
<th class="cohort-header">Mo 10</th>
<th class="cohort-header">Mo 11</th>
<th class="cohort-header">Mo 12</th>
</tr>
</thead>
<tbody>
<tr><td class="font-semibold text-gray-700 py-1">Jan 26</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td class="cohort-cell" style="background:#fafefe;color:#1a2b3c">3%</td><td class="cohort-cell" style="background:#fcfeff;color:#1a2b3c">2%</td><td class="cohort-cell" style="background:#fdffff;color:#1a2b3c">1%</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Dec 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td class="cohort-cell" style="background:#fafefe;color:#1a2b3c">3%</td><td class="cohort-cell" style="background:#fcfeff;color:#1a2b3c">2%</td><td class="cohort-cell" style="background:#fdffff;color:#1a2b3c">1%</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Nov 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td class="cohort-cell" style="background:#fafefe;color:#1a2b3c">3%</td><td class="cohort-cell" style="background:#fcfeff;color:#1a2b3c">2%</td><td class="cohort-cell" style="background:#fdffff;color:#1a2b3c">1%</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Oct 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td class="cohort-cell" style="background:#fafefe;color:#1a2b3c">3%</td><td class="cohort-cell" style="background:#fcfeff;color:#1a2b3c">2%</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Sep 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td class="cohort-cell" style="background:#fafefe;color:#1a2b3c">3%</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Aug 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td class="cohort-cell" style="background:#f8fdfe;color:#1a2b3c">4%</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Jul 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td class="cohort-cell" style="background:#f5fcfd;color:#1a2b3c">5%</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Jun 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td class="cohort-cell" style="background:#f0fafc;color:#1a2b3c">6%</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">May 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td class="cohort-cell" style="background:#e8f7fa;color:#1a2b3c">8%</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Apr 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td class="cohort-cell" style="background:#e0f4f8;color:#1a2b3c">11%</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Mar 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">15%</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td class="font-semibold text-gray-700 py-1">Feb 25</td><td class="cohort-cell" style="background:#0077b6;color:#fff">100%</td><td class="cohort-cell" style="background:#48cae4;color:#fff">32%</td><td class="cohort-cell" style="background:#90e0ef;color:#1a2b3c">24%</td><td class="cohort-cell" style="background:#caf0f8;color:#1a2b3c">19%</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
</tbody>
</table>
</div>
</div>

<!-- Cohort Revenue Retention -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Cohort Revenue Retention</h3></div>
</div>
<div id="cCohortRetention" style="height:320px"></div>
</div>

<!-- LTV Distribution -->
<div class="lg:col-span-3 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">LTV Distribution</h3></div>
</div>
<div id="cLTVDist" style="height:320px"></div>
</div>
</div>

<!-- ROW 2: LTV by Channel + LTV by First Product + LTV:CAC Ratio -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">LTV by Channel</h3></div>
</div>
<div id="cLTVChannel" style="height:220px"></div>
<div class="flex items-center justify-center gap-4 mt-2">
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#0077b6"></div><span class="text-[10px] muted-text">Current LTV</span></div>
<div class="flex items-center gap-1"><div class="w-2.5 h-2.5 rounded" style="background:#90e0ef"></div><span class="text-[10px] muted-text">Previous LTV</span></div>
</div>
</div>

<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">LTV by First Product</h3></div>
</div>
<div id="cLTVProduct" style="height:220px"></div>
</div>

<div class="dash-card p-5 flex flex-col items-center justify-center">
<div class="flex items-center justify-between w-full mb-2">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">LTV:CAC Ratio</h3></div>
</div>
<div id="cLTVCAC" style="height:200px;width:100%"></div>
<div class="text-center mt-2">
<div class="text-2xl font-bold text-gray-900">3.2x</div>
<div class="text-[10px] muted-text">Target: 3.0x</div>
</div>
</div>
</div>

<!-- ROW 3: RFM Segmentation Treemap + AI RFM Insight + Customer Lifecycle Funnel -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-4">

<!-- RFM Segmentation Treemap -->
<div class="lg:col-span-4 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">RFM Segmentation Treemap</h3></div>
</div>
<div id="cRFMTreemap" style="height:260px"></div>
</div>

<!-- AI RFM Insight -->
<div class="lg:col-span-3 dash-card p-5" style="background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-color:#7dd3fc">
<div class="flex items-center gap-2 mb-3">
<div class="ai-chip-icon"><i data-lucide="sparkles" style="width:12px;height:12px"></i></div>
<h3 class="font-semibold text-sm text-gray-800">AI RFM Insight</h3>
</div>
<div class="space-y-3">
<div class="text-center">
<div class="text-3xl font-bold text-gray-900">237</div>
<div class="text-xs text-gray-600">customers moved</div>
</div>
<div class="text-center">
<div class="text-lg font-semibold text-red-600">Loyal to At-Risk</div>
<div class="text-xs text-gray-600">Avg LTV: $340</div>
</div>
<div class="p-3 bg-white/60 rounded-lg">
<div class="text-xs text-gray-700 text-center">Launch win-back email flow NOW.</div>
</div>
<button class="w-full py-2 rounded-lg text-sm font-semibold text-white" style="background:linear-gradient(135deg,#0077b6,#00b4d8)">Take Action</button>
</div>
</div>

<!-- Customer Lifecycle Funnel -->
<div class="lg:col-span-5 dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Customer Lifecycle Funnel</h3></div>
</div>
<div class="space-y-1 flex flex-col items-center">
<div class="funnel-step" style="width:90%">Prospect</div>
<div class="funnel-connector"></div>
<div class="funnel-step" style="width:75%;opacity:0.9">First Purchase <span class="text-xs opacity-70">50%</span></div>
<div class="funnel-connector"></div>
<div class="funnel-step" style="width:60%;opacity:0.8">Repeat <span class="text-xs opacity-70">35%</span></div>
<div class="funnel-connector"></div>
<div class="funnel-step" style="width:45%;opacity:0.7">Loyal <span class="text-xs opacity-70">35%</span></div>
<div class="funnel-connector"></div>
<div class="funnel-step" style="width:30%;opacity:0.6">Champion <span class="text-xs opacity-70">5%</span></div>
</div>
</div>
</div>

<!-- ROW 4: RFM Migration Sankey + Repeat Purchase Rate + Time Between Purchases -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

<!-- RFM Migration Sankey -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">RFM Migration Sankey</h3></div>
</div>
<div class="flex justify-between text-[10px] text-gray-500 mb-2">
<span>Previous Segment</span>
<span>Current Segment</span>
</div>
<div class="space-y-3">
<div class="flex items-center gap-2">
<div class="sankey-node" style="background:#0077b6;color:#fff;width:80px">Loyal</div>
<div class="flex-1 sankey-connector"></div>
<div class="sankey-node" style="background:#ef4444;color:#fff;width:80px">At-Risk</div>
</div>
<div class="flex items-center gap-2">
<div class="sankey-node" style="background:#0077b6;color:#fff;width:80px">Loyal</div>
<div class="flex-1 sankey-connector"></div>
<div class="sankey-node" style="background:#22c55e;color:#fff;width:80px">Champions</div>
</div>
<div class="flex items-center gap-2">
<div class="sankey-node" style="background:#f59e0b;color:#fff;width:80px">New</div>
<div class="flex-1 sankey-connector"></div>
<div class="sankey-node" style="background:#0077b6;color:#fff;width:80px">Loyal</div>
</div>
<div class="flex items-center gap-2">
<div class="sankey-node" style="background:#8b5cf6;color:#fff;width:80px">Promising</div>
<div class="flex-1 sankey-connector"></div>
<div class="sankey-node" style="background:#0077b6;color:#fff;width:80px">Loyal</div>
</div>
</div>
</div>

<!-- Repeat Purchase Rate -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Repeat Purchase Rate</h3></div>
</div>
<div id="cRepeatRate" style="height:220px"></div>
</div>

<!-- Time Between Purchases -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Time Between Purchases</h3></div>
</div>
<div id="cTimeBetween" style="height:220px"></div>
</div>
</div>

<!-- ROW 5: Churn Prediction Scatter + Revenue Pareto + Next Purchase Timeline -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

<!-- Churn Prediction Scatter -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Churn Prediction Scatter</h3></div>
</div>
<div id="cChurnScatter" style="height:220px"></div>
</div>

<!-- Revenue Pareto 80/20 -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Revenue Pareto 80/20</h3></div>
</div>
<div id="cPareto" style="height:220px"></div>
</div>

<!-- Next Purchase Timeline -->
<div class="dash-card p-5">
<div class="flex items-center justify-between mb-3">
<div class="drag-handle"><i data-lucide="grip-vertical" style="width:14px;height:14px" class="grip-dots muted-text"></i><h3 class="font-semibold text-sm text-gray-800">Next Purchase Timeline</h3></div>
</div>
<div id="cNextPurchase" style="height:220px"></div>
</div>
</div>

</main>


<!-- ==================== PAGE: MARKETING (Placeholder) ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-marketing">
<div class="dash-card p-10 text-center">
<div class="text-6xl mb-4">ðŸ“¢</div>
<h2 class="text-2xl font-bold text-gray-900 mb-2">Marketing Analytics</h2>
<p class="text-gray-500 mb-6">Campaign performance, attribution, and ROI tracking.</p>
<div class="flex justify-center gap-3">
<button class="filter-chip active">Coming Soon</button>
</div>
</div>
</main>

<!-- ==================== PAGE: INVENTORY (Placeholder) ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-inventory">
<div class="dash-card p-10 text-center">
<div class="text-6xl mb-4">ðŸ“¦</div>
<h2 class="text-2xl font-bold text-gray-900 mb-2">Inventory Management</h2>
<p class="text-gray-500 mb-6">Stock levels, reorder points, and warehouse optimization.</p>
<div class="flex justify-center gap-3">
<button class="filter-chip active">Coming Soon</button>
</div>
</div>
</main>

<!-- ==================== PAGE: REPORTS (Placeholder) ==================== -->
<main class="p-4 lg:p-6 space-y-4 page-content" id="page-reports">
<div class="dash-card p-10 text-center">
<div class="text-6xl mb-4">ðŸ“Š</div>
<h2 class="text-2xl font-bold text-gray-900 mb-2">Custom Reports</h2>
<p class="text-gray-500 mb-6">Build and schedule custom analytics reports.</p>
<div class="flex justify-center gap-3">
<button class="filter-chip active">Coming Soon</button>
</div>
</div>
</main>

</div><!-- end main-content -->

<!-- Lock FAB -->
<button class="lock-fab" id="lockFab" onclick="toggleLock()">
<i data-lucide="lock" style="width:16px;height:16px" id="icLock"></i>
<i data-lucide="unlock" style="width:16px;height:16px;display:none" id="icUnlock"></i>
<span id="lockLbl">Unlock Layout</span>
</button>

<!-- Fullscreen Overlay -->
<div class="fs-overlay" id="fsOverlay" onclick="closeFs(event)">
<div class="fs-card" id="fsCard" onclick="event.stopPropagation()">
<div class="flex items-center justify-between mb-4"><h3 class="font-semibold text-lg text-gray-800" id="fsTitle"></h3><button onclick="closeFs()" class="icon-btn"><i data-lucide="x" style="width:20px;height:20px"></i></button></div>
<div id="fsCont" style="height:500px"></div>
</div>
</div>

<script>
// === COLOR PALETTES ===
const P = {
  hourly: ['#0077b6','#00b4d8','#0891b2','#06d6a0','#2dc653','#57cc99','#ffd166','#f4a261','#ee6c4d','#e63946','#d62828','#e76f51','#264653','#2a9d8f','#48cae4','#90e0ef','#023e58','#118ab2','#073b4c','#06d6a0','#0077b6','#00b4d8','#48cae4','#0891b2'],
  yoy: ['#0077b6','#06d6a0'],
  funnel: ['#264653','#2a9d8f','#e9c46a','#f4a261','#e76f51'],
  traffic: ['#0077b6','#06d6a0','#ffd166','#ef476f'],
  channel: ['#0077b6','#06d6a0','#ffd166'],
  heatL: [{from:0,to:20,color:'#caf0f8',name:'Low'},{from:21,to:40,color:'#06d6a0',name:'Med-Low'},{from:41,to:60,color:'#ffd166',name:'Medium'},{from:61,to:80,color:'#f4a261',name:'High'},{from:81,to:100,color:'#e63946',name:'Very High'}],
  heatD: [{from:0,to:20,color:'#0b2a3f',name:'Low'},{from:21,to:40,color:'#065f46',name:'Med-Low'},{from:41,to:60,color:'#92702a',name:'Medium'},{from:61,to:80,color:'#c4602a',name:'High'},{from:81,to:100,color:'#b91c1c',name:'Very High'}],
  wf: {gross:'#0891b2',disc:'#ef476f',ret:'#f4a261',ship:'#ffd166',cogs:'#e63946',ad:'#d62828',net:'#06d6a0'},
  cust: ['#0077b6','#06d6a0'],
  inv: ['#06d6a0','#ffd166','#e63946'],
  gauge: ['#0077b6','#06d6a0'],
  chan: ['#0077b6','#06d6a0','#ffd166','#ef476f'],
  traf: ['#2a9d8f','#e9c46a','#f4a261','#264653','#e76f51'],
  dev: ['#0077b6','#06d6a0','#ffd166','#ef476f','#8b5cf6'],
  wfSales: {gross:'#0891b2',disc:'#ef476f',ret:'#f4a261',fees:'#ffd166',tax:'#8b5cf6',cogs:'#e63946',net:'#06d6a0'},
  geo: ['#264653','#2a9d8f','#0077b6','#e9c46a','#f4a261','#e76f51','#8b5cf6'],
  cities: ['#0077b6','#06d6a0','#2a9d8f','#48cae4','#ffd166','#f4a261','#ef476f','#8b5cf6','#0891b2','#e76f51'],
  pay: ['#0077b6','#06d6a0','#ffd166','#ef476f'],
  cur: ['#0077b6','#06d6a0','#ffd166','#8b5cf6'],
  cancel: ['#ef476f','#ffd166','#8b5cf6','#f4a261'],
  cohortL: [{from:0,to:2,color:'#caf0f8',name:'$0-2K'},{from:2.1,to:4,color:'#48cae4',name:'$2-4K'},{from:4.1,to:6,color:'#06d6a0',name:'$4-6K'},{from:6.1,to:8,color:'#ffd166',name:'$6-8K'},{from:8.1,to:12,color:'#e63946',name:'$8K+'}],
  cohortD: [{from:0,to:2,color:'#0b2a3f',name:'$0-2K'},{from:2.1,to:4,color:'#0d4a6a',name:'$2-4K'},{from:4.1,to:6,color:'#065f46',name:'$4-6K'},{from:6.1,to:8,color:'#92702a',name:'$6-8K'},{from:8.1,to:12,color:'#b91c1c',name:'$8K+'}],
  rfm: ['#0077b6','#06d6a0','#ffd166','#ef476f','#8b5cf6','#f4a261'],
  margin: ['#22c55e','#f59e0b','#ef4444'],
  returnReasons: ['#f59e0b','#3b82f6','#ef4444','#8b5cf6','#64748b','#eab308'],
};

let theme = localStorage.getItem('sp-theme') || 'light';
let charts = {};
const dk = () => theme === 'dark';
const fc = () => dk() ? '#6b8299' : '#5f7d8e';
const gc = () => dk() ? '#1c2e40' : '#e8f4f8';

function applyTheme(t) {
  theme = t;
  document.documentElement.setAttribute('data-theme', t);
  localStorage.setItem('sp-theme', t);
  document.getElementById('icMoon').style.display = dk() ? 'none' : 'block';
  document.getElementById('icSun').style.display = dk() ? 'block' : 'none';
  Object.values(charts).forEach(c => { try { c.destroy() } catch(e) {} });
  charts = {};
  buildCharts();
  lucide.createIcons();
}

function toggleTheme() { applyTheme(dk() ? 'light' : 'dark'); }

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
  document.getElementById('sidebarOverlay').classList.toggle('active');
}

// Page Switching
function switchPage(page) {
  document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
  document.querySelector(`.sidebar-link[data-page="${page}"]`).classList.add('active');
  document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  lucide.createIcons();
}

// Product Tabs
function switchProductTab(btn, tabId) {
  document.querySelectorAll('#page-products .tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('#page-products .tab-content').forEach(t => {
    t.classList.remove('active');
  });
  document.getElementById('tab-' + tabId).classList.add('active');
}

// Sortable
let sortableInstance = null;
let locked = true;
function toggleLock() {
  locked = !locked;
  document.getElementById('icLock').style.display = locked ? 'block' : 'none';
  document.getElementById('icUnlock').style.display = locked ? 'none' : 'block';
  document.getElementById('lockLbl').textContent = locked ? 'Unlock Layout' : 'Lock Layout';
  document.getElementById('lockFab').classList.toggle('unlocked', !locked);
  if (sortableInstance) { sortableInstance.option('disabled', locked); }
  lucide.createIcons();
}

// Expand
function expandChart(id, title) {
  document.getElementById('fsTitle').textContent = title;
  document.getElementById('fsOverlay').classList.add('active');
  const cont = document.getElementById('fsCont');
  cont.innerHTML = '';
  const src = charts[id];
  if (!src) return;
  const o = JSON.parse(JSON.stringify(src._opts));
  o.chart.height = 480;
  if (o.chart.toolbar) o.chart.toolbar.show = true;
  new ApexCharts(cont, o).render();
  lucide.createIcons();
}

function closeFs(e) {
  if (e && e.target !== document.getElementById('fsOverlay')) return;
  document.getElementById('fsOverlay').classList.remove('active');
  document.getElementById('fsCont').innerHTML = '';
}

// Chart helper
function mk(el, opts) {
  opts.chart = opts.chart || {};
  opts.chart.fontFamily = 'Inter';
  opts.chart.foreColor = fc();
  opts.chart.background = 'transparent';
  if (!opts.chart.sparkline) { opts.grid = opts.grid || {}; opts.grid.borderColor = gc(); opts.grid.strokeDashArray = 4; }
  opts.tooltip = opts.tooltip || {}; opts.tooltip.theme = theme;
  const c = new ApexCharts(document.querySelector(el), opts);
  c._opts = opts;
  c.render();
  charts[el.replace('#', '')] = c;
}

function hd(n, lo, hi) {
  let a = [];
  for (let i = 0; i < n; i++) a.push(Math.floor(Math.random() * (hi - lo + 1)) + lo);
  return a;
}

function sp(el, d, c) {
  new ApexCharts(document.querySelector(el), {
    series: [{ data: d }],
    chart: { type: 'area', height: 32, width: 80, sparkline: { enabled: true } },
    stroke: { width: 2, curve: 'smooth' },
    fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: .4, opacityTo: 0 } },
    colors: [c],
    tooltip: { enabled: false }
  }).render();
}

function buildCharts() {
  // === DASHBOARD PAGE CHARTS ===
  sp('#spkRev', [18, 22, 20, 24, 23, 28, 24.8], '#0077b6');
  sp('#spkOrd', [250, 280, 260, 290, 300, 310, 312], '#06d6a0');
  sp('#spkAov', [84, 82, 81, 80, 82, 78, 79.5], '#ef476f');
  sp('#spkCr', [2.8, 2.9, 3.0, 3.1, 3.0, 3.2, 3.2], '#8b5cf6');
  sp('#spkPr', [15, 16, 17, 16.5, 17.8, 18, 18.4], '#0891b2');

  mk('#cRevHour', {
    series: [{ name: 'Revenue', data: [320, 480, 620, 890, 1100, 1450, 1680, 1920, 2100, 1850, 1620, 1400, 1580, 1720, 1850, 1650, 1380, 1100, 920, 780, 580, 420, 350, 280] }],
    chart: { type: 'bar', height: 230, toolbar: { show: false }, zoom: { enabled: true } },
    plotOptions: { bar: { borderRadius: 4, columnWidth: '62%', distributed: true } },
    colors: P.hourly,
    xaxis: { categories: ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'], labels: { style: { fontSize: '9px' } }, axisBorder: { show: false }, axisTicks: { show: false } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000).toFixed(1) + 'K' } },
    legend: { show: false },
    dataLabels: { enabled: false },
    tooltip: { y: { formatter: v => '$' + v.toLocaleString() } }
  });

  mk('#cGauge', {
    series: [78],
    chart: { type: 'radialBar', height: 230 },
    plotOptions: { radialBar: { startAngle: -135, endAngle: 135, hollow: { size: '62%' }, track: { background: dk() ? '#1c2e40' : '#e8f4f8' }, dataLabels: { name: { show: true, fontSize: '13px', offsetY: 22 }, value: { show: true, fontSize: '38px', fontWeight: 700, offsetY: -14, color: dk() ? '#e2ecf5' : '#1a2b3c', formatter: v => v } } } },
    fill: { type: 'gradient', gradient: { shade: 'dark', type: 'horizontal', gradientToColors: ['#06d6a0'], stops: [0, 100] } },
    colors: ['#0077b6'],
    stroke: { lineCap: 'round' },
    labels: ['Health Score']
  });

  mk('#cChannel', {
    series: [{ name: 'Online Store', data: [4400, 5500, 4100, 6700, 5200, 5800, 7600] }, { name: 'Social', data: [2400, 2100, 2900, 3200, 2800, 3100, 3500] }, { name: 'Marketplace', data: [1100, 1300, 900, 1400, 1200, 1500, 1800] }],
    chart: { type: 'area', height: 230, stacked: true, toolbar: { show: false } },
    colors: P.channel,
    stroke: { width: 2, curve: 'smooth' },
    fill: { type: 'gradient', gradient: { opacityFrom: .6, opacityTo: .1 } },
    xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000).toFixed(0) + 'K' } },
    legend: { position: 'bottom', fontSize: '11px' },
    dataLabels: { enabled: false }
  });

  mk('#cTraffic', {
    series: [42, 28, 18, 12],
    chart: { type: 'donut', height: 230 },
    labels: ['Organic', 'Paid', 'Social', 'Direct'],
    colors: P.traffic,
    plotOptions: { pie: { donut: { size: '65%', labels: { show: true, total: { show: true, label: 'Total', fontSize: '12px', fontWeight: 600 } } } } },
    legend: { position: 'bottom', fontSize: '11px' },
    dataLabels: { enabled: true, formatter: v => v.toFixed(0) + '%', style: { fontSize: '11px' }, dropShadow: { enabled: false } },
    stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] }
  });

  mk('#cFunnel', {
    series: [{ name: 'Funnel', data: [{ x: 'Visitors', y: 12500, fillColor: P.funnel[0] }, { x: 'Product Views', y: 8200, fillColor: P.funnel[1] }, { x: 'Add to Cart', y: 4100, fillColor: P.funnel[2] }, { x: 'Checkout', y: 1800, fillColor: P.funnel[3] }, { x: 'Purchase', y: 680, fillColor: P.funnel[4] }] }],
    chart: { type: 'bar', height: 230, toolbar: { show: false } },
    plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '72%', isFunnel: true } },
    colors: P.funnel,
    dataLabels: { enabled: true, formatter: v => v.toLocaleString(), style: { fontSize: '11px' }, dropShadow: { enabled: false } },
    grid: { show: false },
    yaxis: { labels: { style: { fontSize: '11px' } } },
    xaxis: { labels: { show: false } }
  });

  mk('#cHeatmap', {
    series: [{ name: 'Revenue', data: hd(7, 10, 95) }, { name: 'Orders', data: hd(7, 15, 90) }, { name: 'Conversion', data: hd(7, 10, 85) }, { name: 'AOV', data: hd(7, 25, 80) }, { name: 'Traffic', data: hd(7, 20, 100) }],
    chart: { type: 'heatmap', height: 230, toolbar: { show: false } },
    dataLabels: { enabled: true, style: { fontSize: '10px', colors: [dk() ? '#c8d6e5' : '#333'] } },
    plotOptions: { heatmap: { radius: 4, colorScale: { ranges: dk() ? P.heatD : P.heatL } } },
    xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } },
    yaxis: { labels: { style: { fontSize: '10px' } } }
  });

  mk('#cSalesHeat', {
    series: [{ name: 'Wk1', data: hd(7, 5, 70) }, { name: 'Wk2', data: hd(7, 10, 80) }, { name: 'Wk3', data: hd(7, 15, 90) }, { name: 'Wk4', data: hd(7, 8, 75) }],
    chart: { type: 'heatmap', height: 230, toolbar: { show: false } },
    dataLabels: { enabled: true, style: { fontSize: '10px', colors: [dk() ? '#c8d6e5' : '#333'] } },
    plotOptions: { heatmap: { radius: 4, colorScale: { ranges: dk() ? P.heatD : P.heatL } } },
    xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } }
  });

  mk('#cYoy', {
    series: [{ name: '2025', data: [31, 40, 28, 51, 42, 109, 80, 55, 41, 36, 42, 58] }, { name: '2024', data: [24, 35, 22, 44, 38, 92, 68, 48, 35, 30, 37, 50] }],
    chart: { type: 'bar', height: 230, toolbar: { show: false } },
    plotOptions: { bar: { borderRadius: 3, columnWidth: '55%' } },
    colors: P.yoy,
    xaxis: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], labels: { style: { fontSize: '10px' } } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v + 'K' } },
    legend: { position: 'top', horizontalAlign: 'right', fontSize: '11px' },
    dataLabels: { enabled: false }
  });

  mk('#cInvBar', {
    series: [{ data: [1102, 98, 48] }],
    chart: { type: 'bar', height: 60, stacked: true, stackType: '100%', toolbar: { show: false } },
    plotOptions: { bar: { horizontal: true, borderRadius: 4 } },
    colors: P.inv,
    xaxis: { categories: [''], labels: { show: false } },
    yaxis: { labels: { show: false } },
    grid: { show: false },
    legend: { show: false },
    dataLabels: { enabled: true, formatter: v => v.toFixed(0) + '%', style: { fontSize: '11px' } },
    tooltip: { enabled: false }
  });

  mk('#cCustDonut', {
    series: [65, 35],
    chart: { type: 'donut', height: 150, width: 150 },
    labels: ['New', 'Returning'],
    colors: P.cust,
    plotOptions: { pie: { donut: { size: '65%', labels: { show: true, total: { show: true, label: 'Total', fontSize: '10px', formatter: () => '12,847' } } } } },
    legend: { show: false },
    dataLabels: { enabled: false },
    stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] }
  });

  mk('#cWaterfall', {
    series: [{ data: [{ x: 'Gross', y: [0, 142.3], fillColor: P.wf.gross }, { x: 'Discounts', y: [142.3, 128], fillColor: P.wf.disc }, { x: 'Returns', y: [128, 120.5], fillColor: P.wf.ret }, { x: 'Shipping', y: [120.5, 112], fillColor: P.wf.ship }, { x: 'COGS', y: [112, 78], fillColor: P.wf.cogs }, { x: 'Ad Spend', y: [78, 58], fillColor: P.wf.ad }, { x: 'Net Profit', y: [0, 38.1], fillColor: P.wf.net }] }],
    chart: { type: 'rangeBar', height: 200, toolbar: { show: false } },
    plotOptions: { bar: { borderRadius: 3, columnWidth: '55%' } },
    xaxis: { labels: { style: { fontSize: '9px' } }, axisBorder: { show: false } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v + 'K' } },
    dataLabels: { enabled: false }
  });


  // === SALES PAGE CHARTS ===
  sp('#spkSales1', [90, 105, 100, 118, 115, 130, 142], '#0077b6');
  sp('#spkSales2', [80, 92, 88, 100, 105, 112, 118.7], '#06d6a0');
  sp('#spkSales3', [6, 8, 7, 9, 10, 11, 12.4], '#ef476f');
  sp('#spkSales4', [5, 6, 5.5, 7, 6.8, 7.5, 8.2], '#e63946');

  mk('#cSalesChan', { series: [40, 25, 20, 15], chart: { type: 'donut', height: 240 }, labels: ['Online', 'Retail', 'Partner', 'Direct'], colors: P.chan, plotOptions: { pie: { donut: { size: '60%', labels: { show: true, total: { show: true, label: 'Total', fontSize: '11px', formatter: () => '$142.3K' } } } } }, legend: { position: 'bottom', fontSize: '11px' }, dataLabels: { enabled: true, formatter: v => v.toFixed(0) + '%', style: { fontSize: '10px' }, dropShadow: { enabled: false } }, stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] } });

  mk('#cTrafficSrc', { series: [40, 20, 25, 10, 5], chart: { type: 'donut', height: 240 }, labels: ['Organic Search', 'Social', 'Paid Search', 'Direct', 'Other'], colors: P.traf, plotOptions: { pie: { donut: { size: '60%', labels: { show: true, total: { show: true, label: 'Total', fontSize: '11px', formatter: () => '$142.3K' } } } } }, legend: { position: 'bottom', fontSize: '10px' }, dataLabels: { enabled: true, formatter: v => v.toFixed(0) + '%', style: { fontSize: '10px' }, dropShadow: { enabled: false } }, stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] } });

  mk('#cDevice', { series: [{ data: [{ x: 'iOS', y: 42 }, { x: 'Android', y: 28 }, { x: 'Windows', y: 15 }, { x: 'macOS', y: 10 }, { x: 'Other', y: 5 }] }], chart: { type: 'treemap', height: 240, toolbar: { show: false } }, colors: P.dev, plotOptions: { treemap: { distributed: true, enableShades: false } }, dataLabels: { enabled: true, style: { fontSize: '12px' } }, legend: { show: false } });

  mk('#cWaterfallSales', { series: [{ data: [{ x: 'Gross', y: [0, 142.3], fillColor: P.wfSales.gross }, { x: 'Discounts', y: [142.3, 130], fillColor: P.wfSales.disc }, { x: 'Returns', y: [130, 122], fillColor: P.wfSales.ret }, { x: 'Fees', y: [122, 119], fillColor: P.wfSales.fees }, { x: 'Tax', y: [119, 116], fillColor: P.wfSales.tax }, { x: 'COGS', y: [116, 100], fillColor: P.wfSales.cogs }, { x: 'Net Profit', y: [0, 118.7], fillColor: P.wfSales.net }] }], chart: { type: 'rangeBar', height: 300, toolbar: { show: true, tools: { download: true, zoom: true } } }, plotOptions: { bar: { borderRadius: 4, columnWidth: '50%' } }, xaxis: { labels: { style: { fontSize: '10px' } } }, yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v + 'K' } }, dataLabels: { enabled: false }, annotations: { yaxis: [{ y: 118.7, borderColor: '#06d6a0', strokeDashArray: 3, label: { text: 'Net: $118.7K', style: { fontSize: '10px', background: '#06d6a0', color: '#fff' } } }] } });

  const aovData = [72, 74, 73, 75, 76, 75, 77, 78, 76, 74, 73, 75, 77, 79, 80, 78, 76, 77, 79, 81, 80, 78, 76, 75, 77, 78, 80, 76, null, null];
  const aovForecast = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 80, 82, 84, 85];
  mk('#cAOV', { series: [{ name: 'Actual', data: aovData }, { name: 'Forecast', data: aovForecast }], chart: { type: 'line', height: 240, toolbar: { show: false } }, colors: ['#8b5cf6', '#06d6a0'], stroke: { width: [3, 3], curve: 'smooth', dashArray: [0, 6] }, markers: { size: 0, hover: { size: 4 } }, annotations: { yaxis: [{ y: 77, borderColor: '#ef476f', strokeDashArray: 4, label: { text: 'Avg $77', style: { fontSize: '10px', background: '#ef476f', color: '#fff' } } }] }, xaxis: { categories: Array.from({ length: 30 }, (_, i) => 'D' + (i + 1)), labels: { style: { fontSize: '9px' } }, tickAmount: 10 }, yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v }, min: 68, max: 90 }, dataLabels: { enabled: false }, legend: { position: 'top', fontSize: '10px' } });

  mk('#cDayOrders', { series: [{ name: 'Last Week', data: [142, 118, 135, 168, 198, 220, 180] }, { name: 'Current Week', data: [158, 130, 142, 185, 215, 248, 195] }, { name: 'Target', data: [160, 140, 150, 180, 200, 230, 190] }], chart: { type: 'bar', height: 240, toolbar: { show: false } }, plotOptions: { bar: { borderRadius: 3, columnWidth: '65%' } }, colors: ['#90e0ef', '#0077b6', '#06d6a0'], xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } }, yaxis: { labels: { style: { fontSize: '10px' } } }, legend: { position: 'top', fontSize: '10px', horizontalAlign: 'right' }, dataLabels: { enabled: false } });

  mk('#cGeo', { series: [{ name: 'Revenue', data: [{ x: 'NA', y: 60000, fillColor: '#0077b6' }, { x: 'EU', y: 45000, fillColor: '#06d6a0' }, { x: 'APAC', y: 20000, fillColor: '#ffd166' }, { x: 'LATAM', y: 10000, fillColor: '#f4a261' }, { x: 'MEA', y: 5000, fillColor: '#ef476f' }, { x: 'Africa', y: 2300, fillColor: '#8b5cf6' }] }], chart: { type: 'bar', height: 250, toolbar: { show: false } }, plotOptions: { bar: { borderRadius: 5, columnWidth: '55%', distributed: true } }, colors: P.geo, legend: { show: false }, xaxis: { labels: { style: { fontSize: '10px' } } }, yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000).toFixed(0) + 'K' } }, dataLabels: { enabled: false } });

  mk('#cCities', { series: [{ name: 'Revenue', data: [{ x: 'New York', y: 18200, fillColor: '#0077b6' }, { x: 'London', y: 14800, fillColor: '#06d6a0' }, { x: 'Tokyo', y: 11200, fillColor: '#2a9d8f' }, { x: 'Paris', y: 9600, fillColor: '#48cae4' }, { x: 'Sydney', y: 7800, fillColor: '#ffd166' }, { x: 'Toronto', y: 6400, fillColor: '#f4a261' }, { x: 'Berlin', y: 5200, fillColor: '#ef476f' }, { x: 'Dubai', y: 4100, fillColor: '#8b5cf6' }, { x: 'Seoul', y: 3600, fillColor: '#0891b2' }, { x: 'Mumbai', y: 2800, fillColor: '#e76f51' }] }], chart: { type: 'bar', height: 250, toolbar: { show: false } }, plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '65%', distributed: true } }, colors: P.cities, legend: { show: false }, xaxis: { labels: { style: { fontSize: '9px' }, formatter: v => '$' + (v / 1000).toFixed(0) + 'K' } }, yaxis: { labels: { style: { fontSize: '10px' } } }, dataLabels: { enabled: false } });

  mk('#cPayment', { series: [60, 25, 10, 5], chart: { type: 'donut', height: 250 }, labels: ['Credit Card', 'PayPal', 'Bank Transfer', 'Other'], colors: P.pay, plotOptions: { pie: { donut: { size: '60%', labels: { show: true, total: { show: true, label: 'Total', fontSize: '10px', formatter: () => '$142.3K' } } } } }, legend: { position: 'bottom', fontSize: '10px' }, dataLabels: { enabled: true, formatter: v => v.toFixed(0) + '%', style: { fontSize: '10px' }, dropShadow: { enabled: false } }, stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] } });

  mk('#cCurrency', { series: [{ data: [{ x: 'USD (55%)', y: 78265 }, { x: 'EUR (30%)', y: 42690 }, { x: 'GBP (10%)', y: 14230 }, { x: 'JPY (5%)', y: 7115 }] }], chart: { type: 'treemap', height: 250, toolbar: { show: false } }, colors: P.cur, plotOptions: { treemap: { distributed: true, enableShades: false } }, dataLabels: { enabled: true, style: { fontSize: '12px' } }, legend: { show: false } });

  mk('#cNewRet', { series: [{ name: 'New Customers', data: [3200, 4100, 3500, 4800, 4200, 5100, 5800] }, { name: 'Returning', data: [4800, 5200, 4900, 6100, 5800, 6400, 7200] }], chart: { type: 'line', height: 240, toolbar: { show: false } }, colors: ['#0077b6', '#f4a261'], stroke: { width: 2.5, curve: 'smooth' }, xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } }, yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000).toFixed(1) + 'K' } }, legend: { position: 'top', fontSize: '10px' }, dataLabels: { enabled: false } });

  mk('#cRefund', { series: [{ name: 'Refund Volume', type: 'column', data: [820, 960, 1100, 780, 920, 1200, 1400] }, { name: 'Return Rate %', type: 'line', data: [2.1, 2.3, 2.8, 2.0, 2.4, 3.1, 3.5] }], chart: { height: 240, toolbar: { show: false } }, colors: ['#ef476f', '#ffd166'], stroke: { width: [0, 3], curve: 'smooth' }, plotOptions: { bar: { borderRadius: 3, columnWidth: '45%' } }, xaxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], labels: { style: { fontSize: '10px' } } }, yaxis: [{ labels: { style: { fontSize: '10px' }, formatter: v => '$' + v } }, { opposite: true, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' }, max: 5 }], legend: { position: 'top', fontSize: '10px' }, dataLabels: { enabled: false } });

  mk('#cCartFunnel', { series: [{ name: 'Funnel', data: [{ x: 'Sessions', y: 15000, fillColor: '#264653' }, { x: 'Add to Cart', y: 4036, fillColor: '#2a9d8f' }, { x: 'Checkout', y: 2100, fillColor: '#e9c46a' }, { x: 'Purchase', y: 1050, fillColor: '#06d6a0' }, { x: 'Post-Purchase', y: 266, fillColor: '#0077b6' }] }], chart: { type: 'bar', height: 260, toolbar: { show: false } }, plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '72%', isFunnel: true } }, dataLabels: { enabled: true, formatter: v => v.toLocaleString(), style: { fontSize: '11px' }, dropShadow: { enabled: false } }, grid: { show: false }, yaxis: { labels: { style: { fontSize: '10px' } } }, xaxis: { labels: { show: false } } });

  mk('#cRevSession', { series: [{ name: 'Revenue per Session %', data: [{ x: '$0-25', y: 35, fillColor: '#0077b6' }, { x: '$35-50', y: 22, fillColor: '#06d6a0' }, { x: '$25-75', y: 18, fillColor: '#ffd166' }, { x: '$75-100', y: 12, fillColor: '#f4a261' }, { x: '$75-190', y: 6, fillColor: '#ef476f' }, { x: '$150-200', y: 4, fillColor: '#8b5cf6' }, { x: '$200K', y: 2, fillColor: '#2a9d8f' }, { x: '$250+', y: 1, fillColor: '#264653' }] }], chart: { type: 'bar', height: 180, toolbar: { show: false } }, plotOptions: { bar: { borderRadius: 3, columnWidth: '60%', distributed: true } }, colors: ['#0077b6', '#06d6a0', '#ffd166', '#f4a261', '#ef476f', '#8b5cf6', '#2a9d8f', '#264653'], legend: { show: false }, xaxis: { labels: { style: { fontSize: '8px' }, rotate: -30 } }, yaxis: { labels: { style: { fontSize: '9px' }, formatter: v => v + '%' } }, dataLabels: { enabled: false } });

  mk('#cDiscEffect', { series: [{ name: 'Revenue', data: [{ x: '$0-5', y: 500, fillColor: '#0077b6' }, { x: '$5-15', y: 800, fillColor: '#06d6a0' }, { x: '$10-20', y: 600, fillColor: '#ffd166' }, { x: '$20K', y: 300, fillColor: '#f4a261' }, { x: 'Woo', y: 200, fillColor: '#ef476f' }, { x: '30%', y: 150, fillColor: '#8b5cf6' }, { x: '19%', y: 100, fillColor: '#2a9d8f' }, { x: '300+', y: 50, fillColor: '#264653' }] }], chart: { type: 'bar', height: 130, toolbar: { show: false } }, plotOptions: { bar: { borderRadius: 2, columnWidth: '60%', distributed: true } }, legend: { show: false }, xaxis: { labels: { style: { fontSize: '8px' } } }, yaxis: { labels: { style: { fontSize: '8px' }, formatter: v => '$' + v } }, dataLabels: { enabled: false } });

  mk('#cCatTree', { series: [{ data: [{ x: 'Apparel $42K', y: 42000 }, { x: 'Electronics $30K', y: 30000 }, { x: 'Beauty $17K', y: 17000 }, { x: 'Accessories $23K', y: 23000 }, { x: 'Home & Living $18K', y: 18000 }, { x: 'Other $12K', y: 12000 }] }], chart: { type: 'treemap', height: 300, toolbar: { show: false } }, colors: ['#0077b6', '#06d6a0', '#ef476f', '#ffd166', '#8b5cf6', '#f4a261'], plotOptions: { treemap: { distributed: true, enableShades: false } }, dataLabels: { enabled: true, style: { fontSize: '13px' } }, legend: { show: false } });

  mk('#cCohort', { series: [{ name: 'Jan 26', data: [9.4, 8.2, 5.1, 3.8, 2.9, 2.1, 1.6, 1.2] }, { name: 'Dec 25', data: [9.8, 8.2, 5.1, 3.8, 2.9, 2.1, 1.2, null] }, { name: 'Nov 25', data: [5.4, 3.2, 5.1, 3.8, 2.1, 1.2, null, null] }, { name: 'Oct 25', data: [5.8, 3.1, 3.8, 2.9, 2.8, null, null, null] }, { name: 'Sep 25', data: [3.8, 2.9, 2.9, 2.1, null, null, null, null] }, { name: 'Aug 25', data: [2.9, 2.1, 1.6, null, null, null, null, null] }, { name: 'Jul 25', data: [1.6, 1.6, null, null, null, null, null, null] }, { name: 'Jun 25', data: [1.2, null, null, null, null, null, null, null] }], chart: { type: 'heatmap', height: 260, toolbar: { show: false } }, dataLabels: { enabled: true, style: { fontSize: '9px', colors: [dk() ? '#c8d6e5' : '#333'] } }, plotOptions: { heatmap: { radius: 3, colorScale: { ranges: dk() ? P.cohortD : P.cohortL } } }, xaxis: { categories: ['Mo 0', 'Mo 1', 'Mo 2', 'Mo 3', 'Mo 4', 'Mo 5', 'Mo 6', 'Mo 7'], labels: { style: { fontSize: '9px' } } }, yaxis: { labels: { style: { fontSize: '9px' } } } });

  mk('#cTax', { series: [{ name: 'Federal', data: [1800, 1400, 500, 200] }, { name: 'State', data: [900, 800, 120, 60] }, { name: 'Provincial', data: [500, 540, 60, 20] }], chart: { type: 'bar', height: 220, stacked: true, toolbar: { show: false } }, plotOptions: { bar: { horizontal: true, borderRadius: 3, barHeight: '55%' } }, colors: ['#0077b6', '#06d6a0', '#ffd166'], xaxis: { labels: { style: { fontSize: '9px' }, formatter: v => '$' + v } }, yaxis: { categories: ['N. America', 'Europe (VAT)', 'APAC', 'Other'], labels: { style: { fontSize: '10px' } } }, legend: { position: 'top', fontSize: '10px' }, dataLabels: { enabled: false } });

  mk('#cCancelDonut', { series: [45, 30, 15, 10], chart: { type: 'donut', height: 140 }, labels: ['Customer Request', 'Payment Failed', 'Fraud', 'Out of Stock'], colors: P.cancel, plotOptions: { pie: { donut: { size: '55%' } } }, legend: { position: 'bottom', fontSize: '9px' }, dataLabels: { enabled: false }, stroke: { width: 1, colors: [dk() ? '#111d2e' : '#fff'] } });

  mk('#cShipCost', { series: [{ name: 'Charged', data: [1200, 1400, 1600, 1800, 1500, 1300] }, { name: 'Cost', data: [900, 1050, 1200, 1400, 1100, 980] }], chart: { type: 'bar', height: 180, toolbar: { show: false } }, plotOptions: { bar: { borderRadius: 3, columnWidth: '55%' } }, colors: ['#0077b6', '#ef476f'], xaxis: { categories: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'], labels: { style: { fontSize: '9px' } } }, yaxis: { labels: { style: { fontSize: '9px' }, formatter: v => '$' + v } }, legend: { position: 'top', fontSize: '9px' }, dataLabels: { enabled: false } });

  const hrs = ['12AM', '2AM', '4AM', '6AM', '8AM', '10AM', '12PM', '2PM', '4PM', '6PM', '8PM', '10PM'];
  mk('#cHourlyHeat', { series: [{ name: 'Mon', data: hd(12, 100, 6000) }, { name: 'Tue', data: hd(12, 150, 5500) }, { name: 'Wed', data: hd(12, 200, 6500) }, { name: 'Thu', data: hd(12, 250, 7000) }, { name: 'Fri', data: hd(12, 300, 8000) }, { name: 'Sat', data: hd(12, 350, 9000) }, { name: 'Sun', data: hd(12, 200, 5000) }], chart: { type: 'heatmap', height: 240, toolbar: { show: false } }, dataLabels: { enabled: false }, plotOptions: { heatmap: { radius: 3, colorScale: { ranges: dk() ? P.heatD : P.heatL } } }, xaxis: { categories: hrs, labels: { style: { fontSize: '8px' } } }, yaxis: { labels: { style: { fontSize: '9px' } } }, tooltip: { y: { formatter: v => '$' + v.toLocaleString() } } });

  mk('#cVelocity', { series: [{ name: 'Orders/Hr', data: [1.2, 1.4, 1.6, 2.1, 2.8, 3.2, 4.2, 3.8, 3.2, 2.6, 2.1, 1.8, 1.4, 1.1] }], chart: { type: 'area', height: 180, toolbar: { show: false } }, colors: ['#0077b6'], stroke: { width: 2.5, curve: 'smooth' }, fill: { type: 'gradient', gradient: { opacityFrom: .5, opacityTo: .05 } }, annotations: { yaxis: [{ y: 2.0, borderColor: '#ef476f', strokeDashArray: 4, label: { text: 'Target: 2.0/hr', style: { fontSize: '9px', background: '#ef476f', color: '#fff' } } }] }, xaxis: { categories: ['12a', '2a', '4a', '6a', '8a', '10a', '12p', '2p', '4p', '6p', '8p', '10p', '12a', '2a'], labels: { style: { fontSize: '8px' } } }, yaxis: { labels: { style: { fontSize: '9px' } } }, dataLabels: { enabled: false } });


  // === PRODUCTS PAGE CHARTS ===
  sp('#spkVel1', [18, 22, 25, 28, 30, 30.5], '#22c55e');
  sp('#spkVel2', [10, 12, 11, 14, 15, 15.2], '#22c55e');
  sp('#spkVel3', [5, 6, 6.5, 7, 7.5, 8], '#22c55e');
  sp('#spkVel4', [6, 5.5, 5, 4, 3.5, 3], '#ef4444');
  sp('#spkVel5', [7, 6, 5.5, 5, 4.5, 4], '#ef4444');
  sp('#spkVel6', [5, 4.5, 4, 3.5, 3.2, 3], '#ef4444');

  // BCG Matrix (Bubble Chart)
  mk('#cBCG', {
    series: [
      { name: 'Product A (L)', data: [[18000, 120, 50]] },
      { name: 'Product B (S)', data: [[25000, 80, 28]] },
      { name: 'Product C (M) Star1', data: [[85000, 110, 55]] },
      { name: 'Product C (M) Star2', data: [[72000, 95, 65]] },
      { name: 'Product C (M) CashCow', data: [[350000, 30, 70]] },
      { name: 'Product D (M)', data: [[15000, -10, 45]] },
      { name: 'Dog1', data: [[8000, -5, 30]] },
      { name: 'Dog2', data: [[12000, 5, 35]] }
    ],
    chart: { type: 'bubble', height: 380, toolbar: { show: false }, zoom: { enabled: false } },
    colors: ['#f59e0b', '#f59e0b', '#22c55e', '#22c55e', '#0077b6', '#ef4444', '#ef4444', '#ef4444'],
    fill: { opacity: 0.7 },
    xaxis: {
      title: { text: 'Revenue ($)', style: { fontSize: '11px', color: fc() } },
      labels: { style: { fontSize: '10px' }, formatter: v => { if (v >= 500000) return '$500k+'; if (v >= 100000) return '$' + (v / 1000) + 'k'; if (v >= 1000) return '$' + (v / 1000) + 'k'; return '$' + v; } },
      min: 0, max: 500000, tickAmount: 6
    },
    yaxis: {
      title: { text: 'Growth Rate (%)', style: { fontSize: '11px', color: fc() } },
      labels: { style: { fontSize: '10px' }, formatter: v => v + '%' },
      min: -50, max: 160
    },
    dataLabels: { enabled: false },
    legend: { show: false },
    annotations: {
      yaxis: [{ y: 0, borderColor: '#6b8299', strokeDashArray: 0, opacity: 0.2 }],
      xaxis: [{ x: 100000, borderColor: '#6b8299', strokeDashArray: 4, opacity: 0.3 }],
      texts: [
        { x: '15%', y: '8%', text: 'Question Marks', style: { fontSize: '11px', fontWeight: 700, color: '#f59e0b' } },
        { x: '75%', y: '8%', text: 'Stars', style: { fontSize: '11px', fontWeight: 700, color: '#22c55e' } },
        { x: '15%', y: '55%', text: 'Dogs', style: { fontSize: '11px', fontWeight: 700, color: '#ef4444' } },
        { x: '75%', y: '55%', text: 'Cash Cows', style: { fontSize: '11px', fontWeight: 700, color: '#0077b6' } }
      ]
    },
    grid: { borderColor: gc(), strokeDashArray: 4, xaxis: { lines: { show: true } } },
    tooltip: {
      custom: function({ seriesIndex, dataPointIndex, w }) {
        const name = w.config.series[seriesIndex].name;
        const d = w.config.series[seriesIndex].data[0];
        return '<div style="padding:8px 12px;font-size:12px"><strong>' + name + '</strong><br/>Revenue: $' + d[0].toLocaleString() + '<br/>Growth: ' + d[1] + '%<br/>Volume: ' + d[2] + '</div>';
      }
    }
  });

  mk('#cMarginCompare', {
    series: [{ name: 'Margin %', data: [62, 58, 52, 45, 38, 22, 15] }],
    chart: { type: 'bar', height: 260, toolbar: { show: false } },
    plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '55%' } },
    colors: ['#0077b6'],
    fill: { type: 'gradient', gradient: { shade: 'light', type: 'horizontal', gradientToColors: ['#48cae4'], stops: [0, 100] } },
    xaxis: { categories: ['Product 1:', 'Product 2:', 'Product 3:', 'Product 4:', 'Product 5:', 'Product 6:', 'Product 7:'], max: 70, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    yaxis: { labels: { style: { fontSize: '11px' } } },
    dataLabels: { enabled: true, formatter: v => v + '%', style: { fontSize: '11px' }, offsetX: 5 },
    annotations: { xaxis: [{ x: 42, borderColor: '#ef4444', strokeDashArray: 3, label: { text: 'Store Avg: 42%', style: { color: '#ef4444', fontSize: '10px', background: 'transparent', border: 'none' }, orientation: 'horizontal', offsetY: -5 } }] },
    grid: { borderColor: gc(), strokeDashArray: 4, yaxis: { lines: { show: false } } },
    tooltip: { y: { formatter: v => v + '%' } }
  });

  mk('#cCollection', {
    series: [{ name: 'Revenue', data: [340, 280, 120] }, { name: 'Units', data: [290, 220, 85] }, { name: 'Profit', data: [180, 150, 60] }],
    chart: { type: 'bar', height: 220, toolbar: { show: false } },
    plotOptions: { bar: { borderRadius: 4, columnWidth: '65%' } },
    colors: ['#0077b6', '#06d6a0', '#8b5cf6'],
    xaxis: { categories: ["Men's", "Women's", "Accessories"], labels: { style: { fontSize: '11px' } } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v } },
    legend: { show: false },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 },
    tooltip: { y: { formatter: v => '$' + v } }
  });

  mk('#cReturnRate', {
    series: [{ name: 'Product A', data: [[120, 14]] }, { name: 'Product B', data: [[280, 8]] }, { name: 'Product C', data: [[350, 5]] }, { name: 'Product C2', data: [[420, 4]] }],
    chart: { type: 'scatter', height: 220, toolbar: { show: false }, zoom: { enabled: false } },
    colors: ['#ef4444', '#0077b6', '#06d6a0', '#06d6a0'],
    markers: { size: [14, 10, 8, 8] },
    xaxis: { title: { text: 'Revenue', style: { fontSize: '10px', color: fc() } }, labels: { style: { fontSize: '10px' }, formatter: v => '$' + v } },
    yaxis: { title: { text: 'Return Rate', style: { fontSize: '10px', color: fc() } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    dataLabels: { enabled: false },
    legend: { show: false },
    annotations: {
      yaxis: [{ y: 8.2, borderColor: '#f59e0b', strokeDashArray: 3, label: { text: 'Avg 8.2%', style: { color: '#f59e0b', fontSize: '9px', background: 'transparent' } } }],
      points: [
        { x: 120, y: 14, marker: { size: 0 }, label: { text: 'Product A - RETURN RATE OUTLIER', style: { fontSize: '9px', color: '#ef4444', background: 'transparent' }, offsetY: -10 } },
        { x: 120, y: 12, marker: { size: 0 }, label: { text: 'Needs investigation', style: { fontSize: '8px', color: '#6b8299', background: 'transparent' }, offsetY: -5 } }
      ]
    },
    grid: { borderColor: gc(), strokeDashArray: 4 },
    tooltip: {
      custom: function({ seriesIndex, w }) {
        const name = w.config.series[seriesIndex].name;
        const d = w.config.series[seriesIndex].data[0];
        return '<div style="padding:6px 10px;font-size:11px"><strong>' + name + '</strong><br/>Revenue: $' + d[0] + '<br/>Return Rate: ' + d[1] + '%</div>';
      }
    }
  });

  // === MARGINS TAB CHARTS ===
  sp('#spkMargin1', [42, 44, 45, 46, 47, 48], '#22c55e');
  sp('#spkMargin2', [31, 32, 33, 33.2, 33.5, 33.8], '#22c55e');
  sp('#spkMargin3', [7, 7.5, 8, 8.3, 8.5, 8.7], '#ef4444');
  sp('#spkMargin4', [5, 5.2, 5.4, 5.6, 5.7, 5.8], '#ef4444');
  sp('#spkMargin5', [28, 29, 30, 31, 31.5, 32.4], '#22c55e');
  sp('#spkMargin6', [3, 4, 5, 6, 6, 7], '#ef4444');

  // Margin Waterfall
  mk('#cMarginWaterfall', {
    series: [{ data: [{ x: 'Gross', y: [0, 142.3], fillColor: '#22c55e' }, { x: 'Discounts', y: [142.3, 128], fillColor: '#ef4444' }, { x: 'Returns', y: [128, 120], fillColor: '#f59e0b' }, { x: 'Shipping', y: [120, 112], fillColor: '#8b5cf6' }, { x: 'COGS', y: [112, 48], fillColor: '#0077b6' }, { x: 'Net Margin', y: [0, 48], fillColor: '#06d6a0' }] }],
    chart: { type: 'rangeBar', height: 260, toolbar: { show: false } },
    plotOptions: { bar: { borderRadius: 4, columnWidth: '50%' } },
    xaxis: { labels: { style: { fontSize: '9px' } } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v + 'K' } },
    dataLabels: { enabled: false }
  });

  // Margin % Trend
  mk('#cMarginTrend', {
    series: [{ name: 'Margin %', data: [32, 33, 32.5, 33.2, 33.8, 33.5, 33.8] }, { name: 'Discount Rate', data: [7.5, 8, 8.2, 8.5, 8.7, 8.5, 8.7] }, { name: 'Refund Rate', data: [5.2, 5.3, 5.5, 5.6, 5.8, 5.9, 5.8] }],
    chart: { type: 'line', height: 260, toolbar: { show: false } },
    colors: ['#22c55e', '#f59e0b', '#ef4444'],
    stroke: { width: 2, curve: 'smooth' },
    xaxis: { categories: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7'], labels: { style: { fontSize: '10px' } } },
    yaxis: { labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    legend: { show: false },
    dataLabels: { enabled: false },
    annotations: { yaxis: [{ y: 33.8, borderColor: '#22c55e', strokeDashArray: 3, label: { text: 'Store Avg: 33.8%', style: { fontSize: '9px', background: '#22c55e', color: '#fff' } } }] }
  });

  // Margin by Vendor
  mk('#cVendorMargin', {
    series: [{ name: 'Margin %', data: [42, 38, 35, 32, 28, 24, 18] }],
    chart: { type: 'bar', height: 240, toolbar: { show: false } },
    plotOptions: { bar: { horizontal: true, borderRadius: 3, barHeight: '60%' } },
    colors: ['#0077b6'],
    xaxis: { categories: ['Vendor A', 'Vendor B', 'Vendor C', 'Vendor D', 'Vendor E', 'Vendor F', 'Vendor G'], labels: { style: { fontSize: '9px' }, formatter: v => v + '%' } },
    yaxis: { labels: { style: { fontSize: '9px' } } },
    dataLabels: { enabled: true, formatter: v => v + '%', style: { fontSize: '9px' } },
    annotations: { xaxis: [{ x: 33.8, borderColor: '#ef4444', strokeDashArray: 3, label: { text: 'Store Avg', style: { fontSize: '8px', background: 'transparent', color: '#ef4444' } } }] },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // Discount vs Margin Tradeoff
  mk('#cDiscountTradeoff', {
    series: [{ name: 'Products', data: [{ x: 5, y: 62 }, { x: 8, y: 58 }, { x: 10, y: 52 }, { x: 12, y: 48 }, { x: 15, y: 42 }, { x: 18, y: 35 }, { x: 22, y: 28 }] }],
    chart: { type: 'scatter', height: 260, toolbar: { show: false } },
    colors: ['#0077b6'],
    markers: { size: 8 },
    xaxis: { title: { text: 'Discount %', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    yaxis: { title: { text: 'Margin %', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    annotations: {
      yaxis: [{ y: 42, borderColor: '#22c55e', strokeDashArray: 3, label: { text: 'Sweet Spot', style: { fontSize: '9px', background: '#22c55e', color: '#fff' } } }],
      xaxis: [{ x: 15, borderColor: '#ef4444', strokeDashArray: 3, label: { text: 'Danger Zone', style: { fontSize: '9px', background: '#ef4444', color: '#fff' } } }]
    },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // Price Ladder
  mk('#cPriceLadder', {
    series: [{ name: 'Apparel', data: [25, 45, 65, 85, 120] }, { name: 'Accessories', data: [15, 30, 50, 75, 100] }, { name: 'Footwear', data: [40, 70, 100, 140, 180] }],
    chart: { type: 'line', height: 240, toolbar: { show: false } },
    colors: ['#0077b6', '#22c55e', '#8b5cf6'],
    stroke: { width: 2, curve: 'smooth' },
    xaxis: { categories: ['Tier 1', 'Tier 2', 'Tier 3', 'Tier 4', 'Tier 5'], labels: { style: { fontSize: '9px' } } },
    yaxis: { labels: { style: { fontSize: '9px' }, formatter: v => '$' + v } },
    legend: { show: false },
    dataLabels: { enabled: false }
  });

  // === INVENTORY TAB CHARTS ===
  sp('#spkInvVal', [250, 260, 270, 275, 280, 284.5], '#0077b6');
  sp('#spkCover', [6.8, 6.6, 6.5, 6.4, 6.3, 6.2], '#22c55e');

  // Stockout Risk Heatmap
  mk('#cStockoutHeatmap', {
    series: [
      { name: 'Sneakers', data: [4, 3, 2, 1, 0] },
      { name: 'Jeans', data: [8, 6, 4, 2, 1] },
      { name: 'T-Shirt', data: [12, 10, 8, 6, 4] },
      { name: 'Hoodie', data: [6, 4, 2, 1, 0] },
      { name: 'Belt', data: [3, 2, 1, 0, 0] },
      { name: 'Scarf', data: [2, 1, 0, 0, 0] }
    ],
    chart: { type: 'heatmap', height: 280, toolbar: { show: false } },
    colors: ['#ef4444'],
    plotOptions: { heatmap: { radius: 4, colorScale: { ranges: [{ from: 0, to: 2, color: '#ef4444', name: 'Critical' }, { from: 3, to: 5, color: '#f59e0b', name: 'Warning' }, { from: 6, to: 8, color: '#22c55e', name: 'OK' }, { from: 9, to: 15, color: '#0077b6', name: 'Healthy' }] } } },
    xaxis: { categories: ['Wk 1', 'Wk 2', 'Wk 3', 'Wk 4', 'Wk 5+'], labels: { style: { fontSize: '9px' } } },
    yaxis: { labels: { style: { fontSize: '10px' } } },
    dataLabels: { enabled: true, style: { fontSize: '10px' } }
  });

  // Inventory Aging
  mk('#cInvAging', {
    series: [{ name: 'SKUs', data: [420, 380, 250, 120, 78] }],
    chart: { type: 'bar', height: 240, toolbar: { show: false } },
    plotOptions: { bar: { borderRadius: 4, columnWidth: '60%', distributed: true } },
    colors: ['#22c55e', '#84cc16', '#eab308', '#f97316', '#ef4444'],
    xaxis: { categories: ['0-30d', '31-60d', '61-90d', '91-120d', '120d+'], labels: { style: { fontSize: '10px' } } },
    yaxis: { labels: { style: { fontSize: '10px' } } },
    dataLabels: { enabled: false }
  });

  // === RETURNS TAB CHARTS ===
  sp('#spkReturn1', [7.2, 7.5, 7.8, 8, 8.1, 8.2], '#ef4444');
  sp('#spkReturn2', [7, 7.2, 7.4, 7.6, 7.8, 8.2], '#ef4444');
  sp('#spkReturn3', [320, 325, 330, 335, 340, 347], '#ef4444');
  sp('#spkReturn4', [5.2, 5.3, 5.4, 5.5, 5.6, 5.8], '#ef4444');
  sp('#spkReturn5', [9, 9.2, 8.8, 8.5, 8.3, 8.4], '#22c55e');

  // Return Trend
  mk('#cReturnTrend', {
    series: [{ name: 'Refund $', data: [6200, 6400, 6800, 7200, 7600, 8200] }, { name: 'Return Rate %', data: [7.2, 7.5, 7.8, 8, 8.1, 8.2] }],
    chart: { type: 'line', height: 260, toolbar: { show: false } },
    colors: ['#8b5cf6', '#0077b6'],
    stroke: { width: [3, 2], curve: 'smooth' },
    xaxis: { categories: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6'], labels: { style: { fontSize: '10px' } } },
    yaxis: [{ labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000) + 'K' } }, { opposite: true, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } }],
    legend: { show: false },
    dataLabels: { enabled: false }
  });

  // Return Reasons
  mk('#cReturnReasons', {
    series: [32, 28, 18, 12, 6, 4],
    chart: { type: 'donut', height: 200 },
    labels: ['Wrong Size', 'Not as Described', 'Quality Issue', 'Changed Mind', 'Damaged Transit', 'Other'],
    colors: P.returnReasons,
    plotOptions: { pie: { donut: { size: '55%' } } },
    legend: { show: false },
    dataLabels: { enabled: false },
    stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] }
  });

  // Return Rate vs Revenue Scatter
  mk('#cReturnScatter', {
    series: [{ name: 'Products', data: [{ x: 120, y: 14 }, { x: 280, y: 8 }, { x: 350, y: 5 }, { x: 420, y: 4 }, { x: 180, y: 6 }, { x: 90, y: 9 }] }],
    chart: { type: 'scatter', height: 260, toolbar: { show: false } },
    colors: ['#0077b6'],
    markers: { size: 8 },
    xaxis: { title: { text: 'Revenue ($)', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' } } },
    yaxis: { title: { text: 'Return Rate (%)', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' } },
    annotations: {
      yaxis: [{ y: 8.2, borderColor: '#f59e0b', strokeDashArray: 3, label: { text: 'Avg 8.2%', style: { fontSize: '9px', background: '#f59e0b', color: '#fff' } } }],
      xaxis: [{ x: 200, borderColor: '#22c55e', strokeDashArray: 3, label: { text: 'Ideal Zone', style: { fontSize: '9px', background: '#22c55e', color: '#fff' } } }]
    },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // Return Donut (New vs Returning)
  mk('#cReturnDonut', {
    series: [65, 35],
    chart: { type: 'donut', height: 140, width: 140 },
    labels: ['New', 'Returning'],
    colors: ['#ef4444', '#22c55e'],
    plotOptions: { pie: { donut: { size: '60%' } } },
    legend: { show: false },
    dataLabels: { enabled: false },
    stroke: { width: 2, colors: [dk() ? '#111d2e' : '#fff'] }
  });


  // === CUSTOMER INTELLIGENCE PAGE CHARTS ===
  sp('#spkCust1', [12500, 12600, 12700, 12750, 12800, 12830, 12847], '#0077b6');
  sp('#spkCust2', [900, 880, 860, 850, 845, 843, 842], '#ef476f');
  sp('#spkCust3', [26.6, 26.8, 27.1, 27.5, 27.9, 28.2, 28.4], '#22c55e');
  sp('#spkCust4', [184, 184.5, 185, 185.2, 185.5, 185.8, 186], '#22c55e');
  sp('#spkCust5', [3.5, 3.6, 3.7, 3.8, 3.9, 3.95, 4], '#22c55e');
  sp('#spkCust6', [184, 184.5, 185, 185.2, 185.5, 185.8, 186], '#22c55e');
  sp('#spkCust7', [10.8, 11.2, 11.8, 12.4, 13.1, 13.6, 14], '#ef476f');

  // Cohort Revenue Retention
  mk('#cCohortRetention', {
    series: [
      { name: 'Jan 26', data: [100, 32, 24, 19, 15, 11, 8, 6, 5, 4, 3, 2, 1] },
      { name: 'Dec 25', data: [100, 35, 28, 22, 18, 14, 11, 8, 6, 5, 4, 3] },
      { name: 'Nov 25', data: [100, 38, 30, 25, 20, 16, 12, 9, 7, 5, 4] },
      { name: 'Oct 25', data: [100, 40, 32, 27, 22, 18, 14, 10, 8, 6] },
      { name: 'Sep 25', data: [100, 42, 35, 29, 24, 19, 15, 11, 8] }
    ],
    chart: { type: 'line', height: 320, toolbar: { show: false } },
    colors: ['#0077b6', '#48cae4', '#90e0ef', '#caf0f8', '#e0f4f8'],
    stroke: { width: 2, curve: 'smooth' },
    xaxis: { categories: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], title: { text: 'Months Since Acquisition', style: { fontSize: '11px' } }, labels: { style: { fontSize: '10px' } } },
    yaxis: { title: { text: 'Revenue Retention (%)', style: { fontSize: '11px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' }, min: 0, max: 100 },
    legend: { position: 'top', fontSize: '10px' },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // LTV Distribution
  mk('#cLTVDist', {
    series: [{ name: 'Customers', data: [120, 280, 520, 890, 1250, 1680, 1420, 980, 650, 420, 280, 180, 120, 80, 50] }],
    chart: { type: 'bar', height: 320, toolbar: { show: false } },
    colors: ['#0077b6'],
    plotOptions: { bar: { borderRadius: 4, columnWidth: '80%' } },
    xaxis: { categories: ['$10', '$25', '$50', '$75', '$100', '$150', '$200', '$250', '$300', '$400', '$500', '$600', '$750', '$1K', '$1.5K+'], title: { text: 'LTV Range ($)', style: { fontSize: '11px' } }, labels: { style: { fontSize: '9px' } } },
    yaxis: { title: { text: 'Number of Customers', style: { fontSize: '11px' } }, labels: { style: { fontSize: '10px' } } },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // LTV by Channel
  mk('#cLTVChannel', {
    series: [{ name: 'Current LTV', data: [145, 198, 132, 175] }, { name: 'Previous LTV', data: [138, 185, 128, 168] }],
    chart: { type: 'bar', height: 220, toolbar: { show: false } },
    colors: ['#0077b6', '#90e0ef'],
    plotOptions: { bar: { borderRadius: 4, columnWidth: '60%' } },
    xaxis: { categories: ['Google', 'Meta', 'Email', 'Organic'], labels: { style: { fontSize: '10px' } } },
    yaxis: { title: { text: 'Average LTV ($)', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => '$' + v } },
    legend: { position: 'top', fontSize: '10px' },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // LTV by First Product
  mk('#cLTVProduct', {
    series: [{ name: 'Avg LTV', data: [{ x: 'Product A', y: 245, fillColor: '#0077b6' }, { x: 'Product B', y: 198, fillColor: '#06d6a0' }, { x: 'Product C', y: 175, fillColor: '#ffd166' }, { x: 'Product D', y: 142, fillColor: '#f4a261' }] }],
    chart: { type: 'bar', height: 220, toolbar: { show: false } },
    plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '60%', distributed: true } },
    colors: ['#0077b6', '#06d6a0', '#ffd166', '#f4a261'],
    xaxis: { labels: { style: { fontSize: '10px' }, formatter: v => '$' + v } },
    yaxis: { labels: { style: { fontSize: '11px' } } },
    dataLabels: { enabled: true, formatter: v => '$' + v, style: { fontSize: '10px' } },
    legend: { show: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // LTV:CAC Ratio Gauge
  mk('#cLTVCAC', {
    series: [64],
    chart: { type: 'radialBar', height: 200 },
    plotOptions: { radialBar: { startAngle: -90, endAngle: 90, hollow: { size: '55%' }, track: { background: dk() ? '#1c2e40' : '#e8f4f8' }, dataLabels: { name: { show: false }, value: { show: false } } } },
    fill: { type: 'gradient', gradient: { shade: 'dark', type: 'horizontal', gradientToColors: ['#22c55e'], stops: [0, 100] } },
    colors: ['#ef4444'],
    stroke: { lineCap: 'round' }
  });

  // RFM Treemap
  mk('#cRFMTreemap', {
    series: [{ data: [{ x: 'Champions', y: 2850 }, { x: 'Loyal', y: 4200 }, { x: 'At-Risk', y: 1980 }, { x: 'New', y: 2450 }, { x: 'Promising', y: 1367 }] }],
    chart: { type: 'treemap', height: 260, toolbar: { show: false } },
    colors: ['#0077b6', '#06d6a0', '#ef4444', '#ffd166', '#8b5cf6'],
    plotOptions: { treemap: { distributed: true, enableShades: false } },
    dataLabels: { enabled: true, style: { fontSize: '13px', fontWeight: 600 } },
    legend: { show: false }
  });

  // Repeat Purchase Rate
  mk('#cRepeatRate', {
    series: [{ name: 'Repeat Rate', data: [18, 22, 25, 23, 28, 32, 35, 33, 38, 42, 45, 48] }],
    chart: { type: 'line', height: 220, toolbar: { show: false } },
    colors: ['#0077b6'],
    stroke: { width: 2.5, curve: 'smooth' },
    markers: { size: 4, colors: ['#0077b6'], strokeColors: '#fff', strokeWidth: 2 },
    xaxis: { categories: ['M1', 'M2', 'M3', 'M4', 'M5', 'M6', 'M7', 'M8', 'M9', 'M10', 'M11', 'M12'], labels: { style: { fontSize: '10px' } } },
    yaxis: { title: { text: 'Repeat Purchase Rate (%)', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' }, min: 0, max: 60 },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // Time Between Purchases
  mk('#cTimeBetween', {
    series: [{ name: 'Customers', data: [420, 680, 520, 380, 290, 210, 160, 120, 90, 70, 55, 45, 35, 28, 22] }],
    chart: { type: 'bar', height: 220, toolbar: { show: false } },
    colors: ['#0077b6'],
    plotOptions: { bar: { borderRadius: 4, columnWidth: '75%' } },
    xaxis: { categories: ['7', '14', '21', '30', '45', '60', '75', '90', '105', '120', '150', '180', '210', '240', '270+'], title: { text: 'Days Between Purchases', style: { fontSize: '10px' } }, labels: { style: { fontSize: '9px' } } },
    yaxis: { title: { text: 'Number of Customers', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' } } },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });

  // Churn Prediction Scatter
  mk('#cChurnScatter', {
    series: [{ name: 'Customers', data: Array.from({ length: 50 }, () => [Math.random() * 120 + 10, Math.random() * 80 + 10]) }],
    chart: { type: 'scatter', height: 220, toolbar: { show: false }, zoom: { enabled: false } },
    colors: ['#0077b6'],
    markers: { size: 6, opacity: 0.6 },
    xaxis: { title: { text: 'Days Since Last Order', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' } }, min: 0, max: 140 },
    yaxis: { title: { text: 'Churn Probability (%)', style: { fontSize: '10px' } }, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' }, min: 0, max: 100 },
    grid: { borderColor: gc(), strokeDashArray: 4 },
    legend: { show: false }
  });

  // Revenue Pareto
  mk('#cPareto', {
    series: [{ name: 'Revenue', type: 'column', data: [45000, 38500, 32000, 28500, 25000, 22000, 19500, 17200, 15000, 12800] }, { name: 'Cumulative %', type: 'line', data: [20, 38, 52, 64, 74, 82, 89, 94, 97, 100] }],
    chart: { height: 220, toolbar: { show: false } },
    colors: ['#0077b6', '#ef4444'],
    stroke: { width: [0, 3], curve: 'smooth' },
    plotOptions: { bar: { borderRadius: 3, columnWidth: '50%' } },
    xaxis: { categories: ['Top 10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '100%'], labels: { style: { fontSize: '9px' } } },
    yaxis: [{ labels: { style: { fontSize: '10px' }, formatter: v => '$' + (v / 1000) + 'K' } }, { opposite: true, labels: { style: { fontSize: '10px' }, formatter: v => v + '%' }, min: 0, max: 100 }],
    legend: { position: 'top', fontSize: '10px' },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 },
    annotations: { yaxis: [{ y: 80, borderColor: '#22c55e', strokeDashArray: 3, label: { text: '80% Revenue', style: { fontSize: '9px', background: '#22c55e', color: '#fff' } } }] }
  });

  // Next Purchase Timeline
  mk('#cNextPurchase', {
    series: [{ name: 'Likely Purchasers', data: [120, 280, 520, 890, 1250, 980, 720, 480, 320, 180, 120, 80] }],
    chart: { type: 'line', height: 220, toolbar: { show: false } },
    colors: ['#0077b6'],
    stroke: { width: 2.5, curve: 'smooth' },
    markers: { size: 5, colors: ['#0077b6'], strokeColors: '#fff', strokeWidth: 2 },
    xaxis: { categories: ['Today', '+1d', '+2d', '+3d', '+5d', '+7d', '+10d', '+14d', '+21d', '+30d', '+45d', '+60d'], labels: { style: { fontSize: '9px' } } },
    yaxis: { labels: { style: { fontSize: '10px' } } },
    dataLabels: { enabled: false },
    grid: { borderColor: gc(), strokeDashArray: 4 }
  });
}

// INIT
document.addEventListener('DOMContentLoaded', function() {
  lucide.createIcons();
  applyTheme(theme);

  const sortableGrid = document.getElementById('sortableGrid');
  if (sortableGrid) {
    sortableInstance = Sortable.create(sortableGrid, {
      animation: 200,
      handle: '.drag-handle',
      ghostClass: 'sortable-ghost',
      chosenClass: 'sortable-chosen',
      disabled: true,
      direction: 'vertical',
    });
  }
});
</script>
</body>
</html>
